import{r as Kt,g as qt,u as Jt,a as ie,b as Tt,s as lt,B as Se,j as t,L as Ht,F as Qt,c as Zt,d as Xt,e as er,f as tr,h as rr,i as zt,l as Lt}from"./index-CR2cQI6u.js";var Mt,Gt;function ar(){return Gt||(Gt=1,Mt=(function(W){var b={};function h(p){if(b[p])return b[p].exports;var f=b[p]={i:p,l:!1,exports:{}};return W[p].call(f.exports,f,f.exports,h),f.l=!0,f.exports}return h.m=W,h.c=b,h.d=function(p,f,B){h.o(p,f)||Object.defineProperty(p,f,{enumerable:!0,get:B})},h.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},h.t=function(p,f){if(1&f&&(p=h(p)),8&f||4&f&&typeof p=="object"&&p&&p.__esModule)return p;var B=Object.create(null);if(h.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:p}),2&f&&typeof p!="string")for(var re in p)h.d(B,re,(function(se){return p[se]}).bind(null,re));return B},h.n=function(p){var f=p&&p.__esModule?function(){return p.default}:function(){return p};return h.d(f,"a",f),f},h.o=function(p,f){return Object.prototype.hasOwnProperty.call(p,f)},h.p="",h(h.s=9)})([function(W,b){W.exports=Kt()},function(W,b,h){var p;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var f={}.hasOwnProperty;function B(){for(var re=[],se=0;se<arguments.length;se++){var le=arguments[se];if(le){var X=typeof le;if(X==="string"||X==="number")re.push(le);else if(Array.isArray(le)&&le.length){var ee=B.apply(null,le);ee&&re.push(ee)}else if(X==="object")for(var je in le)f.call(le,je)&&le[je]&&re.push(je)}}return re.join(" ")}W.exports?(B.default=B,W.exports=B):(p=(function(){return B}).apply(b,[]))===void 0||(W.exports=p)})()},function(W,b,h){(function(p){var f=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,se=/^0o[0-7]+$/i,le=parseInt,X=typeof p=="object"&&p&&p.Object===Object&&p,ee=typeof self=="object"&&self&&self.Object===Object&&self,je=X||ee||Function("return this")(),N=Object.prototype.toString,Ae=je.Symbol,Te=Ae?Ae.prototype:void 0,Pe=Te?Te.toString:void 0;function s(T){if(typeof T=="string")return T;if(J(T))return Pe?Pe.call(T):"";var I=T+"";return I=="0"&&1/T==-1/0?"-0":I}function Ie(T){var I=typeof T;return!!T&&(I=="object"||I=="function")}function J(T){return typeof T=="symbol"||(function(I){return!!I&&typeof I=="object"})(T)&&N.call(T)=="[object Symbol]"}function ae(T){return T?(T=(function(I){if(typeof I=="number")return I;if(J(I))return NaN;if(Ie(I)){var ce=typeof I.valueOf=="function"?I.valueOf():I;I=Ie(ce)?ce+"":ce}if(typeof I!="string")return I===0?I:+I;I=I.replace(f,"");var be=re.test(I);return be||se.test(I)?le(I.slice(2),be?2:8):B.test(I)?NaN:+I})(T))===1/0||T===-1/0?17976931348623157e292*(T<0?-1:1):T==T?T:0:T===0?T:0}W.exports=function(T,I,ce){var be,H,Ne,te;return T=(be=T)==null?"":s(be),H=(function(Le){var ve=ae(Le),_e=ve%1;return ve==ve?_e?ve-_e:ve:0})(ce),Ne=0,te=T.length,H==H&&(te!==void 0&&(H=H<=te?H:te),Ne!==void 0&&(H=H>=Ne?H:Ne)),ce=H,I=s(I),T.slice(ce,ce+I.length)==I}}).call(this,h(3))},function(W,b){var h;h=(function(){return this})();try{h=h||new Function("return this")()}catch{typeof window=="object"&&(h=window)}W.exports=h},function(W,b,h){(function(p){var f=/^\[object .+?Constructor\]$/,B=typeof p=="object"&&p&&p.Object===Object&&p,re=typeof self=="object"&&self&&self.Object===Object&&self,se=B||re||Function("return this")(),le,X=Array.prototype,ee=Function.prototype,je=Object.prototype,N=se["__core-js_shared__"],Ae=(le=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"",Te=ee.toString,Pe=je.hasOwnProperty,s=je.toString,Ie=RegExp("^"+Te.call(Pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=X.splice,ae=Le(se,"Map"),T=Le(Object,"create");function I(v){var F=-1,_=v?v.length:0;for(this.clear();++F<_;){var M=v[F];this.set(M[0],M[1])}}function ce(v){var F=-1,_=v?v.length:0;for(this.clear();++F<_;){var M=v[F];this.set(M[0],M[1])}}function be(v){var F=-1,_=v?v.length:0;for(this.clear();++F<_;){var M=v[F];this.set(M[0],M[1])}}function H(v,F){for(var _,M,de=v.length;de--;)if((_=v[de][0])===(M=F)||_!=_&&M!=M)return de;return-1}function Ne(v){return!(!_e(v)||(F=v,Ae&&Ae in F))&&((function(_){var M=_e(_)?s.call(_):"";return M=="[object Function]"||M=="[object GeneratorFunction]"})(v)||(function(_){var M=!1;if(_!=null&&typeof _.toString!="function")try{M=!!(_+"")}catch{}return M})(v)?Ie:f).test((function(_){if(_!=null){try{return Te.call(_)}catch{}try{return _+""}catch{}}return""})(v));var F}function te(v,F){var _,M,de=v.__data__;return((M=typeof(_=F))=="string"||M=="number"||M=="symbol"||M=="boolean"?_!=="__proto__":_===null)?de[typeof F=="string"?"string":"hash"]:de.map}function Le(v,F){var _=(function(M,de){return M==null?void 0:M[de]})(v,F);return Ne(_)?_:void 0}function ve(v,F){if(typeof v!="function"||F&&typeof F!="function")throw new TypeError("Expected a function");var _=function(){var M=arguments,de=F?F.apply(this,M):M[0],Fe=_.cache;if(Fe.has(de))return Fe.get(de);var w=v.apply(this,M);return _.cache=Fe.set(de,w),w};return _.cache=new(ve.Cache||be),_}function _e(v){var F=typeof v;return!!v&&(F=="object"||F=="function")}I.prototype.clear=function(){this.__data__=T?T(null):{}},I.prototype.delete=function(v){return this.has(v)&&delete this.__data__[v]},I.prototype.get=function(v){var F=this.__data__;if(T){var _=F[v];return _==="__lodash_hash_undefined__"?void 0:_}return Pe.call(F,v)?F[v]:void 0},I.prototype.has=function(v){var F=this.__data__;return T?F[v]!==void 0:Pe.call(F,v)},I.prototype.set=function(v,F){return this.__data__[v]=T&&F===void 0?"__lodash_hash_undefined__":F,this},ce.prototype.clear=function(){this.__data__=[]},ce.prototype.delete=function(v){var F=this.__data__,_=H(F,v);return!(_<0)&&(_==F.length-1?F.pop():J.call(F,_,1),!0)},ce.prototype.get=function(v){var F=this.__data__,_=H(F,v);return _<0?void 0:F[_][1]},ce.prototype.has=function(v){return H(this.__data__,v)>-1},ce.prototype.set=function(v,F){var _=this.__data__,M=H(_,v);return M<0?_.push([v,F]):_[M][1]=F,this},be.prototype.clear=function(){this.__data__={hash:new I,map:new(ae||ce),string:new I}},be.prototype.delete=function(v){return te(this,v).delete(v)},be.prototype.get=function(v){return te(this,v).get(v)},be.prototype.has=function(v){return te(this,v).has(v)},be.prototype.set=function(v,F){return te(this,v).set(v,F),this},ve.Cache=be,W.exports=ve}).call(this,h(3))},function(W,b,h){(function(p){var f=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,se=/^0o[0-7]+$/i,le=parseInt,X=typeof p=="object"&&p&&p.Object===Object&&p,ee=typeof self=="object"&&self&&self.Object===Object&&self,je=X||ee||Function("return this")(),N=Object.prototype.toString,Ae=Math.max,Te=Math.min,Pe=function(){return je.Date.now()};function s(J){var ae=typeof J;return!!J&&(ae=="object"||ae=="function")}function Ie(J){if(typeof J=="number")return J;if((function(I){return typeof I=="symbol"||(function(ce){return!!ce&&typeof ce=="object"})(I)&&N.call(I)=="[object Symbol]"})(J))return NaN;if(s(J)){var ae=typeof J.valueOf=="function"?J.valueOf():J;J=s(ae)?ae+"":ae}if(typeof J!="string")return J===0?J:+J;J=J.replace(f,"");var T=re.test(J);return T||se.test(J)?le(J.slice(2),T?2:8):B.test(J)?NaN:+J}W.exports=function(J,ae,T){var I,ce,be,H,Ne,te,Le=0,ve=!1,_e=!1,v=!0;if(typeof J!="function")throw new TypeError("Expected a function");function F(y){var E=I,Y=ce;return I=ce=void 0,Le=y,H=J.apply(Y,E)}function _(y){return Le=y,Ne=setTimeout(de,ae),ve?F(y):H}function M(y){var E=y-te;return te===void 0||E>=ae||E<0||_e&&y-Le>=be}function de(){var y=Pe();if(M(y))return Fe(y);Ne=setTimeout(de,(function(E){var Y=ae-(E-te);return _e?Te(Y,be-(E-Le)):Y})(y))}function Fe(y){return Ne=void 0,v&&I?F(y):(I=ce=void 0,H)}function w(){var y=Pe(),E=M(y);if(I=arguments,ce=this,te=y,E){if(Ne===void 0)return _(te);if(_e)return Ne=setTimeout(de,ae),F(te)}return Ne===void 0&&(Ne=setTimeout(de,ae)),H}return ae=Ie(ae)||0,s(T)&&(ve=!!T.leading,be=(_e="maxWait"in T)?Ae(Ie(T.maxWait)||0,ae):be,v="trailing"in T?!!T.trailing:v),w.cancel=function(){Ne!==void 0&&clearTimeout(Ne),Le=0,I=te=ce=Ne=void 0},w.flush=function(){return Ne===void 0?H:Fe(Pe())},w}}).call(this,h(3))},function(W,b,h){(function(p,f){var B="[object Arguments]",re="[object Map]",se="[object Object]",le="[object Set]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,je=/^\./,N=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/\\(\\)?/g,Te=/^\[object .+?Constructor\]$/,Pe=/^(?:0|[1-9]\d*)$/,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s[B]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s[re]=s["[object Number]"]=s[se]=s["[object RegExp]"]=s[le]=s["[object String]"]=s["[object WeakMap]"]=!1;var Ie=typeof p=="object"&&p&&p.Object===Object&&p,J=typeof self=="object"&&self&&self.Object===Object&&self,ae=Ie||J||Function("return this")(),T=b&&!b.nodeType&&b,I=T&&typeof f=="object"&&f&&!f.nodeType&&f,ce=I&&I.exports===T&&Ie.process,be=(function(){try{return ce&&ce.binding("util")}catch{}})(),H=be&&be.isTypedArray;function Ne(r,n,c,m){var D=-1,A=r?r.length:0;for(m&&A&&(c=r[++D]);++D<A;)c=n(c,r[D],D,r);return c}function te(r,n){for(var c=-1,m=r?r.length:0;++c<m;)if(n(r[c],c,r))return!0;return!1}function Le(r,n,c,m,D){return D(r,(function(A,R,ke){c=m?(m=!1,A):n(c,A,R,ke)})),c}function ve(r){var n=!1;if(r!=null&&typeof r.toString!="function")try{n=!!(r+"")}catch{}return n}function _e(r){var n=-1,c=Array(r.size);return r.forEach((function(m,D){c[++n]=[D,m]})),c}function v(r){var n=-1,c=Array(r.size);return r.forEach((function(m){c[++n]=m})),c}var F,_,M,de=Array.prototype,Fe=Function.prototype,w=Object.prototype,y=ae["__core-js_shared__"],E=(F=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",Y=Fe.toString,x=w.hasOwnProperty,a=w.toString,G=RegExp("^"+Y.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=ae.Symbol,u=ae.Uint8Array,fe=w.propertyIsEnumerable,Q=de.splice,ge=(_=Object.keys,M=Object,function(r){return _(M(r))}),ne=Xe(ae,"DataView"),Ce=Xe(ae,"Map"),ye=Xe(ae,"Promise"),i=Xe(ae,"Set"),d=Xe(ae,"WeakMap"),C=Xe(Object,"create"),$=He(ne),L=He(Ce),U=He(ye),V=He(i),q=He(d),S=z?z.prototype:void 0,O=S?S.valueOf:void 0,K=S?S.toString:void 0;function P(r){var n=-1,c=r?r.length:0;for(this.clear();++n<c;){var m=r[n];this.set(m[0],m[1])}}function j(r){var n=-1,c=r?r.length:0;for(this.clear();++n<c;){var m=r[n];this.set(m[0],m[1])}}function pe(r){var n=-1,c=r?r.length:0;for(this.clear();++n<c;){var m=r[n];this.set(m[0],m[1])}}function $e(r){var n=-1,c=r?r.length:0;for(this.__data__=new pe;++n<c;)this.add(r[n])}function Ee(r){this.__data__=new j(r)}function Ue(r,n){var c=Me(r)||mt(r)?(function(R,ke){for(var we=-1,me=Array(R);++we<R;)me[we]=ke(we);return me})(r.length,String):[],m=c.length,D=!!m;for(var A in r)!x.call(r,A)||D&&(A=="length"||vt(A,m))||c.push(A);return c}function Ge(r,n){for(var c=r.length;c--;)if(jt(r[c][0],n))return c;return-1}P.prototype.clear=function(){this.__data__=C?C(null):{}},P.prototype.delete=function(r){return this.has(r)&&delete this.__data__[r]},P.prototype.get=function(r){var n=this.__data__;if(C){var c=n[r];return c==="__lodash_hash_undefined__"?void 0:c}return x.call(n,r)?n[r]:void 0},P.prototype.has=function(r){var n=this.__data__;return C?n[r]!==void 0:x.call(n,r)},P.prototype.set=function(r,n){return this.__data__[r]=C&&n===void 0?"__lodash_hash_undefined__":n,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(r){var n=this.__data__,c=Ge(n,r);return!(c<0)&&(c==n.length-1?n.pop():Q.call(n,c,1),!0)},j.prototype.get=function(r){var n=this.__data__,c=Ge(n,r);return c<0?void 0:n[c][1]},j.prototype.has=function(r){return Ge(this.__data__,r)>-1},j.prototype.set=function(r,n){var c=this.__data__,m=Ge(c,r);return m<0?c.push([r,n]):c[m][1]=n,this},pe.prototype.clear=function(){this.__data__={hash:new P,map:new(Ce||j),string:new P}},pe.prototype.delete=function(r){return ct(this,r).delete(r)},pe.prototype.get=function(r){return ct(this,r).get(r)},pe.prototype.has=function(r){return ct(this,r).has(r)},pe.prototype.set=function(r,n){return ct(this,r).set(r,n),this},$e.prototype.add=$e.prototype.push=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},$e.prototype.has=function(r){return this.__data__.has(r)},Ee.prototype.clear=function(){this.__data__=new j},Ee.prototype.delete=function(r){return this.__data__.delete(r)},Ee.prototype.get=function(r){return this.__data__.get(r)},Ee.prototype.has=function(r){return this.__data__.has(r)},Ee.prototype.set=function(r,n){var c=this.__data__;if(c instanceof j){var m=c.__data__;if(!Ce||m.length<199)return m.push([r,n]),this;c=this.__data__=new pe(m)}return c.set(r,n),this};var qe,De=(qe=function(r,n){return r&&Ze(r,n,k)},function(r,n){if(r==null)return r;if(!ht(r))return qe(r,n);for(var c=r.length,m=-1,D=Object(r);++m<c&&n(D[m],m,D)!==!1;);return r}),Ze=(function(r){return function(n,c,m){for(var D=-1,A=Object(n),R=m(n),ke=R.length;ke--;){var we=R[++D];if(c(A[we],we,A)===!1)break}return n}})();function Z(r,n){for(var c=0,m=(n=dt(n,r)?[n]:xe(n)).length;r!=null&&c<m;)r=r[ut(n[c++])];return c&&c==m?r:void 0}function it(r,n){return r!=null&&n in Object(r)}function at(r,n,c,m,D){return r===n||(r==null||n==null||!ot(r)&&!e(n)?r!=r&&n!=n:(function(A,R,ke,we,me,oe){var We=Me(A),Be=Me(R),Oe="[object Array]",Re="[object Array]";We||(Oe=(Oe=Ke(A))==B?se:Oe),Be||(Re=(Re=Ke(R))==B?se:Re);var Ye=Oe==se&&!ve(A),gt=Re==se&&!ve(R),et=Oe==Re;if(et&&!Ye)return oe||(oe=new Ee),We||l(A)?nt(A,R,ke,we,me,oe):(function(he,ue,Et,st,Nt,Ve,Qe){switch(Et){case"[object DataView]":if(he.byteLength!=ue.byteLength||he.byteOffset!=ue.byteOffset)return!1;he=he.buffer,ue=ue.buffer;case"[object ArrayBuffer]":return!(he.byteLength!=ue.byteLength||!st(new u(he),new u(ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return jt(+he,+ue);case"[object Error]":return he.name==ue.name&&he.message==ue.message;case"[object RegExp]":case"[object String]":return he==ue+"";case re:var tt=_e;case le:var yt=2&Ve;if(tt||(tt=v),he.size!=ue.size&&!yt)return!1;var Ct=Qe.get(he);if(Ct)return Ct==ue;Ve|=1,Qe.set(he,ue);var pt=nt(tt(he),tt(ue),st,Nt,Ve,Qe);return Qe.delete(he),pt;case"[object Symbol]":if(O)return O.call(he)==O.call(ue)}return!1})(A,R,Oe,ke,we,me,oe);if(!(2&me)){var Rt=Ye&&x.call(A,"__wrapped__"),Bt=gt&&x.call(R,"__wrapped__");if(Rt||Bt){var Wt=Rt?A.value():A,Yt=Bt?R.value():R;return oe||(oe=new Ee),ke(Wt,Yt,we,me,oe)}}return et?(oe||(oe=new Ee),(function(he,ue,Et,st,Nt,Ve){var Qe=2&Nt,tt=k(he),yt=tt.length,Ct=k(ue).length;if(yt!=Ct&&!Qe)return!1;for(var pt=yt;pt--;){var rt=tt[pt];if(!(Qe?rt in ue:x.call(ue,rt)))return!1}var $t=Ve.get(he);if($t&&Ve.get(ue))return $t==ue;var St=!0;Ve.set(he,ue),Ve.set(ue,he);for(var Ot=Qe;++pt<yt;){rt=tt[pt];var _t=he[rt],Pt=ue[rt];if(st)var Ut=Qe?st(Pt,_t,rt,ue,he,Ve):st(_t,Pt,rt,he,ue,Ve);if(!(Ut===void 0?_t===Pt||Et(_t,Pt,st,Nt,Ve):Ut)){St=!1;break}Ot||(Ot=rt=="constructor")}if(St&&!Ot){var Ft=he.constructor,Dt=ue.constructor;Ft==Dt||!("constructor"in he)||!("constructor"in ue)||typeof Ft=="function"&&Ft instanceof Ft&&typeof Dt=="function"&&Dt instanceof Dt||(St=!1)}return Ve.delete(he),Ve.delete(ue),St})(A,R,ke,we,me,oe)):!1})(r,n,at,c,m,D))}function Je(r){return!(!ot(r)||(function(n){return!!E&&E in n})(r))&&(bt(r)||ve(r)?G:Te).test(He(r))}function At(r){return typeof r=="function"?r:r==null?g:typeof r=="object"?Me(r)?(function(m,D){return dt(m)&&kt(D)?wt(ut(m),D):function(A){var R=(function(ke,we,me){var oe=ke==null?void 0:Z(ke,we);return oe===void 0?me:oe})(A,m);return R===void 0&&R===D?(function(ke,we){return ke!=null&&(function(me,oe,We){oe=dt(oe,me)?[oe]:xe(oe);for(var Be,Oe=-1,Re=oe.length;++Oe<Re;){var Ye=ut(oe[Oe]);if(!(Be=me!=null&&We(me,Ye)))break;me=me[Ye]}return Be||!!(Re=me?me.length:0)&&ft(Re)&&vt(Ye,Re)&&(Me(me)||mt(me))})(ke,we,it)})(A,m):at(D,R,void 0,3)}})(r[0],r[1]):(function(m){var D=(function(A){for(var R=k(A),ke=R.length;ke--;){var we=R[ke],me=A[we];R[ke]=[we,me,kt(me)]}return R})(m);return D.length==1&&D[0][2]?wt(D[0][0],D[0][1]):function(A){return A===m||(function(R,ke,we,me){var oe=we.length,We=oe;if(R==null)return!We;for(R=Object(R);oe--;){var Be=we[oe];if(Be[2]?Be[1]!==R[Be[0]]:!(Be[0]in R))return!1}for(;++oe<We;){var Oe=(Be=we[oe])[0],Re=R[Oe],Ye=Be[1];if(Be[2]){if(Re===void 0&&!(Oe in R))return!1}else{var gt=new Ee,et;if(!(et===void 0?at(Ye,Re,me,3,gt):et))return!1}}return!0})(A,m,D)}})(r):dt(n=r)?(c=ut(n),function(m){return m==null?void 0:m[c]}):(function(m){return function(D){return Z(D,m)}})(n);var n,c}function xt(r){if(c=(n=r)&&n.constructor,m=typeof c=="function"&&c.prototype||w,n!==m)return ge(r);var n,c,m,D=[];for(var A in Object(r))x.call(r,A)&&A!="constructor"&&D.push(A);return D}function xe(r){return Me(r)?r:It(r)}function nt(r,n,c,m,D,A){var R=2&D,ke=r.length,we=n.length;if(ke!=we&&!(R&&we>ke))return!1;var me=A.get(r);if(me&&A.get(n))return me==n;var oe=-1,We=!0,Be=1&D?new $e:void 0;for(A.set(r,n),A.set(n,r);++oe<ke;){var Oe=r[oe],Re=n[oe];if(m)var Ye=R?m(Re,Oe,oe,n,r,A):m(Oe,Re,oe,r,n,A);if(Ye!==void 0){if(Ye)continue;We=!1;break}if(Be){if(!te(n,(function(gt,et){if(!Be.has(et)&&(Oe===gt||c(Oe,gt,m,D,A)))return Be.add(et)}))){We=!1;break}}else if(Oe!==Re&&!c(Oe,Re,m,D,A)){We=!1;break}}return A.delete(r),A.delete(n),We}function ct(r,n){var c,m,D=r.__data__;return((m=typeof(c=n))=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null)?D[typeof n=="string"?"string":"hash"]:D.map}function Xe(r,n){var c=(function(m,D){return m==null?void 0:m[D]})(r,n);return Je(c)?c:void 0}var Ke=function(r){return a.call(r)};function vt(r,n){return!!(n=n??9007199254740991)&&(typeof r=="number"||Pe.test(r))&&r>-1&&r%1==0&&r<n}function dt(r,n){if(Me(r))return!1;var c=typeof r;return!(c!="number"&&c!="symbol"&&c!="boolean"&&r!=null&&!o(r))||ee.test(r)||!X.test(r)||n!=null&&r in Object(n)}function kt(r){return r==r&&!ot(r)}function wt(r,n){return function(c){return c!=null&&c[r]===n&&(n!==void 0||r in Object(c))}}(ne&&Ke(new ne(new ArrayBuffer(1)))!="[object DataView]"||Ce&&Ke(new Ce)!=re||ye&&Ke(ye.resolve())!="[object Promise]"||i&&Ke(new i)!=le||d&&Ke(new d)!="[object WeakMap]")&&(Ke=function(r){var n=a.call(r),c=n==se?r.constructor:void 0,m=c?He(c):void 0;if(m)switch(m){case $:return"[object DataView]";case L:return re;case U:return"[object Promise]";case V:return le;case q:return"[object WeakMap]"}return n});var It=ze((function(r){var n;r=(n=r)==null?"":(function(m){if(typeof m=="string")return m;if(o(m))return K?K.call(m):"";var D=m+"";return D=="0"&&1/m==-1/0?"-0":D})(n);var c=[];return je.test(r)&&c.push(""),r.replace(N,(function(m,D,A,R){c.push(A?R.replace(Ae,"$1"):D||m)})),c}));function ut(r){if(typeof r=="string"||o(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}function He(r){if(r!=null){try{return Y.call(r)}catch{}try{return r+""}catch{}}return""}function ze(r,n){if(typeof r!="function"||n&&typeof n!="function")throw new TypeError("Expected a function");var c=function(){var m=arguments,D=n?n.apply(this,m):m[0],A=c.cache;if(A.has(D))return A.get(D);var R=r.apply(this,m);return c.cache=A.set(D,R),R};return c.cache=new(ze.Cache||pe),c}function jt(r,n){return r===n||r!=r&&n!=n}function mt(r){return(function(n){return e(n)&&ht(n)})(r)&&x.call(r,"callee")&&(!fe.call(r,"callee")||a.call(r)==B)}ze.Cache=pe;var Me=Array.isArray;function ht(r){return r!=null&&ft(r.length)&&!bt(r)}function bt(r){var n=ot(r)?a.call(r):"";return n=="[object Function]"||n=="[object GeneratorFunction]"}function ft(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991}function ot(r){var n=typeof r;return!!r&&(n=="object"||n=="function")}function e(r){return!!r&&typeof r=="object"}function o(r){return typeof r=="symbol"||e(r)&&a.call(r)=="[object Symbol]"}var l=H?(function(r){return function(n){return r(n)}})(H):function(r){return e(r)&&ft(r.length)&&!!s[a.call(r)]};function k(r){return ht(r)?Ue(r):xt(r)}function g(r){return r}f.exports=function(r,n,c){var m=Me(r)?Ne:Le,D=arguments.length<3;return m(r,At(n),c,D,De)}}).call(this,h(3),h(7)(W))},function(W,b){W.exports=function(h){return h.webpackPolyfill||(h.deprecate=function(){},h.paths=[],h.children||(h.children=[]),Object.defineProperty(h,"loaded",{enumerable:!0,get:function(){return h.l}}),Object.defineProperty(h,"id",{enumerable:!0,get:function(){return h.i}}),h.webpackPolyfill=1),h}},function(W,b){String.prototype.padEnd||(String.prototype.padEnd=function(h,p){return h>>=0,p=String(p!==void 0?p:" "),this.length>h?String(this):((h-=this.length)>p.length&&(p+=p.repeat(h/p.length)),String(this)+p.slice(0,h))})},function(W,b,h){function p(w,y,E){return y in w?Object.defineProperty(w,y,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[y]=E,w}function f(w){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]")return Array.from(w)}function B(w){return(function(y){if(Array.isArray(y)){for(var E=0,Y=new Array(y.length);E<y.length;E++)Y[E]=y[E];return Y}})(w)||f(w)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}function re(w){if(Array.isArray(w))return w}function se(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function le(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function X(w,y){for(var E=0;E<y.length;E++){var Y=y[E];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(w,Y.key,Y)}}function ee(w){return(ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function je(w){return(je=typeof Symbol=="function"&&ee(Symbol.iterator)==="symbol"?function(y){return ee(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":ee(y)})(w)}function N(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function Ae(w){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)})(w)}function Te(w,y){return(Te=Object.setPrototypeOf||function(E,Y){return E.__proto__=Y,E})(w,y)}h.r(b);var Pe=h(0),s=h.n(Pe),Ie=h(5),J=h.n(Ie),ae=h(4),T=h.n(ae),I=h(6),ce=h.n(I),be=h(2),H=h.n(be),Ne=h(1),te=h.n(Ne);h(8);function Le(w,y){return re(w)||(function(E,Y){var x=[],a=!0,G=!1,z=void 0;try{for(var u,fe=E[Symbol.iterator]();!(a=(u=fe.next()).done)&&(x.push(u.value),!Y||x.length!==Y);a=!0);}catch(Q){G=!0,z=Q}finally{try{a||fe.return==null||fe.return()}finally{if(G)throw z}}return x})(w,y)||se()}var ve=[["Afghanistan",["asia"],"af","93"],["Albania",["europe"],"al","355"],["Algeria",["africa","north-africa"],"dz","213"],["Andorra",["europe"],"ad","376"],["Angola",["africa"],"ao","244"],["Antigua and Barbuda",["america","carribean"],"ag","1268"],["Argentina",["america","south-america"],"ar","54","(..) ........",0,["11","221","223","261","264","2652","280","2905","291","2920","2966","299","341","342","343","351","376","379","381","3833","385","387","388"]],["Armenia",["asia","ex-ussr"],"am","374",".. ......"],["Aruba",["america","carribean"],"aw","297"],["Australia",["oceania"],"au","61","(..) .... ....",0,["2","3","4","7","8","02","03","04","07","08"]],["Austria",["europe","eu-union"],"at","43"],["Azerbaijan",["asia","ex-ussr"],"az","994","(..) ... .. .."],["Bahamas",["america","carribean"],"bs","1242"],["Bahrain",["middle-east"],"bh","973"],["Bangladesh",["asia"],"bd","880"],["Barbados",["america","carribean"],"bb","1246"],["Belarus",["europe","ex-ussr"],"by","375","(..) ... .. .."],["Belgium",["europe","eu-union"],"be","32","... .. .. .."],["Belize",["america","central-america"],"bz","501"],["Benin",["africa"],"bj","229"],["Bhutan",["asia"],"bt","975"],["Bolivia",["america","south-america"],"bo","591"],["Bosnia and Herzegovina",["europe","ex-yugos"],"ba","387"],["Botswana",["africa"],"bw","267"],["Brazil",["america","south-america"],"br","55","(..) ........."],["British Indian Ocean Territory",["asia"],"io","246"],["Brunei",["asia"],"bn","673"],["Bulgaria",["europe","eu-union"],"bg","359"],["Burkina Faso",["africa"],"bf","226"],["Burundi",["africa"],"bi","257"],["Cambodia",["asia"],"kh","855"],["Cameroon",["africa"],"cm","237"],["Canada",["america","north-america"],"ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde",["africa"],"cv","238"],["Caribbean Netherlands",["america","carribean"],"bq","599","",1],["Central African Republic",["africa"],"cf","236"],["Chad",["africa"],"td","235"],["Chile",["america","south-america"],"cl","56"],["China",["asia"],"cn","86","..-........."],["Colombia",["america","south-america"],"co","57","... ... ...."],["Comoros",["africa"],"km","269"],["Congo",["africa"],"cd","243"],["Congo",["africa"],"cg","242"],["Costa Rica",["america","central-america"],"cr","506","....-...."],["Côte d’Ivoire",["africa"],"ci","225",".. .. .. .."],["Croatia",["europe","eu-union","ex-yugos"],"hr","385"],["Cuba",["america","carribean"],"cu","53"],["Curaçao",["america","carribean"],"cw","599","",0],["Cyprus",["europe","eu-union"],"cy","357",".. ......"],["Czech Republic",["europe","eu-union"],"cz","420","... ... ..."],["Denmark",["europe","eu-union","baltic"],"dk","45",".. .. .. .."],["Djibouti",["africa"],"dj","253"],["Dominica",["america","carribean"],"dm","1767"],["Dominican Republic",["america","carribean"],"do","1","",2,["809","829","849"]],["Ecuador",["america","south-america"],"ec","593"],["Egypt",["africa","north-africa"],"eg","20"],["El Salvador",["america","central-america"],"sv","503","....-...."],["Equatorial Guinea",["africa"],"gq","240"],["Eritrea",["africa"],"er","291"],["Estonia",["europe","eu-union","ex-ussr","baltic"],"ee","372",".... ......"],["Ethiopia",["africa"],"et","251"],["Fiji",["oceania"],"fj","679"],["Finland",["europe","eu-union","baltic"],"fi","358",".. ... .. .."],["France",["europe","eu-union"],"fr","33",". .. .. .. .."],["French Guiana",["america","south-america"],"gf","594"],["French Polynesia",["oceania"],"pf","689"],["Gabon",["africa"],"ga","241"],["Gambia",["africa"],"gm","220"],["Georgia",["asia","ex-ussr"],"ge","995"],["Germany",["europe","eu-union","baltic"],"de","49",".... ........"],["Ghana",["africa"],"gh","233"],["Greece",["europe","eu-union"],"gr","30"],["Grenada",["america","carribean"],"gd","1473"],["Guadeloupe",["america","carribean"],"gp","590","",0],["Guam",["oceania"],"gu","1671"],["Guatemala",["america","central-america"],"gt","502","....-...."],["Guinea",["africa"],"gn","224"],["Guinea-Bissau",["africa"],"gw","245"],["Guyana",["america","south-america"],"gy","592"],["Haiti",["america","carribean"],"ht","509","....-...."],["Honduras",["america","central-america"],"hn","504"],["Hong Kong",["asia"],"hk","852",".... ...."],["Hungary",["europe","eu-union"],"hu","36"],["Iceland",["europe"],"is","354","... ...."],["India",["asia"],"in","91",".....-....."],["Indonesia",["asia"],"id","62"],["Iran",["middle-east"],"ir","98","... ... ...."],["Iraq",["middle-east"],"iq","964"],["Ireland",["europe","eu-union"],"ie","353",".. ......."],["Israel",["middle-east"],"il","972","... ... ...."],["Italy",["europe","eu-union"],"it","39","... .......",0],["Jamaica",["america","carribean"],"jm","1876"],["Japan",["asia"],"jp","81",".. .... ...."],["Jordan",["middle-east"],"jo","962"],["Kazakhstan",["asia","ex-ussr"],"kz","7","... ...-..-..",1,["310","311","312","313","315","318","321","324","325","326","327","336","7172","73622"]],["Kenya",["africa"],"ke","254"],["Kiribati",["oceania"],"ki","686"],["Kosovo",["europe","ex-yugos"],"xk","383"],["Kuwait",["middle-east"],"kw","965"],["Kyrgyzstan",["asia","ex-ussr"],"kg","996","... ... ..."],["Laos",["asia"],"la","856"],["Latvia",["europe","eu-union","ex-ussr","baltic"],"lv","371",".. ... ..."],["Lebanon",["middle-east"],"lb","961"],["Lesotho",["africa"],"ls","266"],["Liberia",["africa"],"lr","231"],["Libya",["africa","north-africa"],"ly","218"],["Liechtenstein",["europe"],"li","423"],["Lithuania",["europe","eu-union","ex-ussr","baltic"],"lt","370"],["Luxembourg",["europe","eu-union"],"lu","352"],["Macau",["asia"],"mo","853"],["Macedonia",["europe","ex-yugos"],"mk","389"],["Madagascar",["africa"],"mg","261"],["Malawi",["africa"],"mw","265"],["Malaysia",["asia"],"my","60","..-....-...."],["Maldives",["asia"],"mv","960"],["Mali",["africa"],"ml","223"],["Malta",["europe","eu-union"],"mt","356"],["Marshall Islands",["oceania"],"mh","692"],["Martinique",["america","carribean"],"mq","596"],["Mauritania",["africa"],"mr","222"],["Mauritius",["africa"],"mu","230"],["Mexico",["america","central-america"],"mx","52","... ... ....",0,["55","81","33","656","664","998","774","229"]],["Micronesia",["oceania"],"fm","691"],["Moldova",["europe"],"md","373","(..) ..-..-.."],["Monaco",["europe"],"mc","377"],["Mongolia",["asia"],"mn","976"],["Montenegro",["europe","ex-yugos"],"me","382"],["Morocco",["africa","north-africa"],"ma","212"],["Mozambique",["africa"],"mz","258"],["Myanmar",["asia"],"mm","95"],["Namibia",["africa"],"na","264"],["Nauru",["africa"],"nr","674"],["Nepal",["asia"],"np","977"],["Netherlands",["europe","eu-union"],"nl","31",".. ........"],["New Caledonia",["oceania"],"nc","687"],["New Zealand",["oceania"],"nz","64","...-...-...."],["Nicaragua",["america","central-america"],"ni","505"],["Niger",["africa"],"ne","227"],["Nigeria",["africa"],"ng","234"],["North Korea",["asia"],"kp","850"],["Norway",["europe","baltic"],"no","47","... .. ..."],["Oman",["middle-east"],"om","968"],["Pakistan",["asia"],"pk","92","...-......."],["Palau",["oceania"],"pw","680"],["Palestine",["middle-east"],"ps","970"],["Panama",["america","central-america"],"pa","507"],["Papua New Guinea",["oceania"],"pg","675"],["Paraguay",["america","south-america"],"py","595"],["Peru",["america","south-america"],"pe","51"],["Philippines",["asia"],"ph","63",".... ......."],["Poland",["europe","eu-union","baltic"],"pl","48","...-...-..."],["Portugal",["europe","eu-union"],"pt","351"],["Puerto Rico",["america","carribean"],"pr","1","",3,["787","939"]],["Qatar",["middle-east"],"qa","974"],["Réunion",["africa"],"re","262"],["Romania",["europe","eu-union"],"ro","40"],["Russia",["europe","asia","ex-ussr","baltic"],"ru","7","(...) ...-..-..",0],["Rwanda",["africa"],"rw","250"],["Saint Kitts and Nevis",["america","carribean"],"kn","1869"],["Saint Lucia",["america","carribean"],"lc","1758"],["Saint Vincent and the Grenadines",["america","carribean"],"vc","1784"],["Samoa",["oceania"],"ws","685"],["San Marino",["europe"],"sm","378"],["São Tomé and Príncipe",["africa"],"st","239"],["Saudi Arabia",["middle-east"],"sa","966"],["Senegal",["africa"],"sn","221"],["Serbia",["europe","ex-yugos"],"rs","381"],["Seychelles",["africa"],"sc","248"],["Sierra Leone",["africa"],"sl","232"],["Singapore",["asia"],"sg","65","....-...."],["Slovakia",["europe","eu-union"],"sk","421"],["Slovenia",["europe","eu-union","ex-yugos"],"si","386"],["Solomon Islands",["oceania"],"sb","677"],["Somalia",["africa"],"so","252"],["South Africa",["africa"],"za","27"],["South Korea",["asia"],"kr","82","... .... ...."],["South Sudan",["africa","north-africa"],"ss","211"],["Spain",["europe","eu-union"],"es","34","... ... ..."],["Sri Lanka",["asia"],"lk","94"],["Sudan",["africa"],"sd","249"],["Suriname",["america","south-america"],"sr","597"],["Swaziland",["africa"],"sz","268"],["Sweden",["europe","eu-union","baltic"],"se","46","(...) ...-..."],["Switzerland",["europe"],"ch","41",".. ... .. .."],["Syria",["middle-east"],"sy","963"],["Taiwan",["asia"],"tw","886"],["Tajikistan",["asia","ex-ussr"],"tj","992"],["Tanzania",["africa"],"tz","255"],["Thailand",["asia"],"th","66"],["Timor-Leste",["asia"],"tl","670"],["Togo",["africa"],"tg","228"],["Tonga",["oceania"],"to","676"],["Trinidad and Tobago",["america","carribean"],"tt","1868"],["Tunisia",["africa","north-africa"],"tn","216"],["Turkey",["europe"],"tr","90","... ... .. .."],["Turkmenistan",["asia","ex-ussr"],"tm","993"],["Tuvalu",["asia"],"tv","688"],["Uganda",["africa"],"ug","256"],["Ukraine",["europe","ex-ussr"],"ua","380","(..) ... .. .."],["United Arab Emirates",["middle-east"],"ae","971"],["United Kingdom",["europe","eu-union"],"gb","44",".... ......"],["United States",["america","north-america"],"us","1","(...) ...-....",0,["907","205","251","256","334","479","501","870","480","520","602","623","928","209","213","310","323","408","415","510","530","559","562","619","626","650","661","707","714","760","805","818","831","858","909","916","925","949","951","303","719","970","203","860","202","302","239","305","321","352","386","407","561","727","772","813","850","863","904","941","954","229","404","478","706","770","912","808","319","515","563","641","712","208","217","309","312","618","630","708","773","815","847","219","260","317","574","765","812","316","620","785","913","270","502","606","859","225","318","337","504","985","413","508","617","781","978","301","410","207","231","248","269","313","517","586","616","734","810","906","989","218","320","507","612","651","763","952","314","417","573","636","660","816","228","601","662","406","252","336","704","828","910","919","701","308","402","603","201","609","732","856","908","973","505","575","702","775","212","315","516","518","585","607","631","716","718","845","914","216","330","419","440","513","614","740","937","405","580","918","503","541","215","412","570","610","717","724","814","401","803","843","864","605","423","615","731","865","901","931","210","214","254","281","325","361","409","432","512","713","806","817","830","903","915","936","940","956","972","979","435","801","276","434","540","703","757","804","802","206","253","360","425","509","262","414","608","715","920","304","307"]],["Uruguay",["america","south-america"],"uy","598"],["Uzbekistan",["asia","ex-ussr"],"uz","998",".. ... .. .."],["Vanuatu",["oceania"],"vu","678"],["Vatican City",["europe"],"va","39",".. .... ....",1],["Venezuela",["america","south-america"],"ve","58"],["Vietnam",["asia"],"vn","84"],["Yemen",["middle-east"],"ye","967"],["Zambia",["africa"],"zm","260"],["Zimbabwe",["africa"],"zw","263"]],_e=[["American Samoa",["oceania"],"as","1684"],["Anguilla",["america","carribean"],"ai","1264"],["Bermuda",["america","north-america"],"bm","1441"],["British Virgin Islands",["america","carribean"],"vg","1284"],["Cayman Islands",["america","carribean"],"ky","1345"],["Cook Islands",["oceania"],"ck","682"],["Falkland Islands",["america","south-america"],"fk","500"],["Faroe Islands",["europe"],"fo","298"],["Gibraltar",["europe"],"gi","350"],["Greenland",["america"],"gl","299"],["Jersey",["europe","eu-union"],"je","44",".... ......"],["Montserrat",["america","carribean"],"ms","1664"],["Niue",["asia"],"nu","683"],["Norfolk Island",["oceania"],"nf","672"],["Northern Mariana Islands",["oceania"],"mp","1670"],["Saint Barthélemy",["america","carribean"],"bl","590","",1],["Saint Helena",["africa"],"sh","290"],["Saint Martin",["america","carribean"],"mf","590","",2],["Saint Pierre and Miquelon",["america","north-america"],"pm","508"],["Sint Maarten",["america","carribean"],"sx","1721"],["Tokelau",["oceania"],"tk","690"],["Turks and Caicos Islands",["america","carribean"],"tc","1649"],["U.S. Virgin Islands",["america","carribean"],"vi","1340"],["Wallis and Futuna",["oceania"],"wf","681"]];function v(w,y,E,Y,x){return!E||x?w+"".padEnd(y.length,".")+" "+Y:w+"".padEnd(y.length,".")+" "+E}function F(w,y,E,Y,x){var a,G,z=[];return G=y===!0,[(a=[]).concat.apply(a,B(w.map((function(u){var fe={name:u[0],regions:u[1],iso2:u[2],countryCode:u[3],dialCode:u[3],format:v(E,u[3],u[4],Y,x),priority:u[5]||0},Q=[];return u[6]&&u[6].map((function(ge){var ne=(function(Ce){for(var ye=1;ye<arguments.length;ye++){var i=arguments[ye]!=null?arguments[ye]:{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter((function(C){return Object.getOwnPropertyDescriptor(i,C).enumerable})))),d.forEach((function(C){p(Ce,C,i[C])}))}return Ce})({},fe);ne.dialCode=u[3]+ge,ne.isAreaCode=!0,ne.areaCodeLength=ge.length,Q.push(ne)})),Q.length>0?(fe.mainCode=!0,G||y.constructor.name==="Array"&&y.includes(u[2])?(fe.hasAreaCodes=!0,[fe].concat(Q)):(z=z.concat(Q),[fe])):[fe]})))),z]}function _(w,y,E,Y){if(E!==null){var x=Object.keys(E),a=Object.values(E);x.forEach((function(G,z){if(Y)return w.push([G,a[z]]);var u=w.findIndex((function(Q){return Q[0]===G}));if(u===-1){var fe=[G];fe[y]=a[z],w.push(fe)}else w[u][y]=a[z]}))}}function M(w,y){return y.length===0?w:w.map((function(E){var Y=y.findIndex((function(a){return a[0]===E[2]}));if(Y===-1)return E;var x=y[Y];return x[1]&&(E[4]=x[1]),x[3]&&(E[5]=x[3]),x[2]&&(E[6]=x[2]),E}))}var de=function w(y,E,Y,x,a,G,z,u,fe,Q,ge,ne,Ce,ye){le(this,w),this.filterRegions=function(S,O){if(typeof S=="string"){var K=S;return O.filter((function(P){return P.regions.some((function(j){return j===K}))}))}return O.filter((function(P){return S.map((function(j){return P.regions.some((function(pe){return pe===j}))})).some((function(j){return j}))}))},this.sortTerritories=function(S,O){var K=[].concat(B(S),B(O));return K.sort((function(P,j){return P.name<j.name?-1:P.name>j.name?1:0})),K},this.getFilteredCountryList=function(S,O,K){return S.length===0?O:K?S.map((function(P){var j=O.find((function(pe){return pe.iso2===P}));if(j)return j})).filter((function(P){return P})):O.filter((function(P){return S.some((function(j){return j===P.iso2}))}))},this.localizeCountries=function(S,O,K){for(var P=0;P<S.length;P++)O[S[P].iso2]!==void 0?S[P].localName=O[S[P].iso2]:O[S[P].name]!==void 0&&(S[P].localName=O[S[P].name]);return K||S.sort((function(j,pe){return j.localName<pe.localName?-1:j.localName>pe.localName?1:0})),S},this.getCustomAreas=function(S,O){for(var K=[],P=0;P<O.length;P++){var j=JSON.parse(JSON.stringify(S));j.dialCode+=O[P],K.push(j)}return K},this.excludeCountries=function(S,O){return O.length===0?S:S.filter((function(K){return!O.includes(K.iso2)}))};var i=(function(S,O,K){var P=[];return _(P,1,S,!0),_(P,3,O),_(P,2,K),P})(u,fe,Q),d=M(JSON.parse(JSON.stringify(ve)),i),C=M(JSON.parse(JSON.stringify(_e)),i),$=Le(F(d,y,ne,Ce,ye),2),L=$[0],U=$[1];if(E){var V=Le(F(C,y,ne,Ce,ye),2),q=V[0];V[1],L=this.sortTerritories(q,L)}Y&&(L=this.filterRegions(Y,L)),this.onlyCountries=this.localizeCountries(this.excludeCountries(this.getFilteredCountryList(x,L,z.includes("onlyCountries")),G),ge,z.includes("onlyCountries")),this.preferredCountries=a.length===0?[]:this.localizeCountries(this.getFilteredCountryList(a,L,z.includes("preferredCountries")),ge,z.includes("preferredCountries")),this.hiddenAreaCodes=this.excludeCountries(this.getFilteredCountryList(x,U),G)},Fe=(function(w){function y(x){var a;le(this,y),(a=(function(i,d){return!d||je(d)!=="object"&&typeof d!="function"?N(i):d})(this,Ae(y).call(this,x))).getProbableCandidate=T()((function(i){return i&&i.length!==0?a.state.onlyCountries.filter((function(d){return H()(d.name.toLowerCase(),i.toLowerCase())}),N(N(a)))[0]:null})),a.guessSelectedCountry=T()((function(i,d,C,$){var L;if(a.props.enableAreaCodes===!1&&($.some((function(q){if(H()(i,q.dialCode))return C.some((function(S){if(q.iso2===S.iso2&&S.mainCode)return L=S,!0})),!0})),L))return L;var U=C.find((function(q){return q.iso2==d}));if(i.trim()==="")return U;var V=C.reduce((function(q,S){return H()(i,S.dialCode)&&(S.dialCode.length>q.dialCode.length||S.dialCode.length===q.dialCode.length&&S.priority<q.priority)?S:q}),{dialCode:"",priority:10001},N(N(a)));return V.name?V:U})),a.updateCountry=function(i){var d,C=a.state.onlyCountries;(d=i.indexOf(0)>="0"&&i.indexOf(0)<="9"?C.find((function($){return $.dialCode==+i})):C.find((function($){return $.iso2==i})))&&d.dialCode&&a.setState({selectedCountry:d,formattedNumber:a.props.disableCountryCode?"":a.formatNumber(d.dialCode,d)})},a.scrollTo=function(i,d){if(i){var C=a.dropdownRef;if(C&&document.body){var $=C.offsetHeight,L=C.getBoundingClientRect().top+document.body.scrollTop,U=L+$,V=i,q=V.getBoundingClientRect(),S=V.offsetHeight,O=q.top+document.body.scrollTop,K=O+S,P=O-L+C.scrollTop,j=$/2-S/2;if(a.props.enableSearch?O<L+32:O<L)d&&(P-=j),C.scrollTop=P;else if(K>U){d&&(P+=j);var pe=$-S;C.scrollTop=P-pe}}}},a.scrollToTop=function(){var i=a.dropdownRef;i&&document.body&&(i.scrollTop=0)},a.formatNumber=function(i,d){if(!d)return i;var C,$=d.format,L=a.props,U=L.disableCountryCode,V=L.enableAreaCodeStretch,q=L.enableLongNumbers,S=L.autoFormat;if(U?((C=$.split(" ")).shift(),C=C.join(" ")):V&&d.isAreaCode?((C=$.split(" "))[1]=C[1].replace(/\.+/,"".padEnd(d.areaCodeLength,".")),C=C.join(" ")):C=$,!i||i.length===0)return U?"":a.props.prefix;if(i&&i.length<2||!C||!S)return U?i:a.props.prefix+i;var O,K=ce()(C,(function(P,j){if(P.remainingText.length===0)return P;if(j!==".")return{formattedText:P.formattedText+j,remainingText:P.remainingText};var pe,$e=re(pe=P.remainingText)||f(pe)||se(),Ee=$e[0],Ue=$e.slice(1);return{formattedText:P.formattedText+Ee,remainingText:Ue}}),{formattedText:"",remainingText:i.split("")});return(O=q?K.formattedText+K.remainingText.join(""):K.formattedText).includes("(")&&!O.includes(")")&&(O+=")"),O},a.cursorToEnd=function(){var i=a.numberInputRef;if(document.activeElement===i){i.focus();var d=i.value.length;i.value.charAt(d-1)===")"&&(d-=1),i.setSelectionRange(d,d)}},a.getElement=function(i){return a["flag_no_".concat(i)]},a.getCountryData=function(){return a.state.selectedCountry?{name:a.state.selectedCountry.name||"",dialCode:a.state.selectedCountry.dialCode||"",countryCode:a.state.selectedCountry.iso2||"",format:a.state.selectedCountry.format||""}:{}},a.handleFlagDropdownClick=function(i){if(i.preventDefault(),a.state.showDropdown||!a.props.disabled){var d=a.state,C=d.preferredCountries,$=d.onlyCountries,L=d.selectedCountry,U=a.concatPreferredCountries(C,$).findIndex((function(V){return V.dialCode===L.dialCode&&V.iso2===L.iso2}));a.setState({showDropdown:!a.state.showDropdown,highlightCountryIndex:U},(function(){a.state.showDropdown&&a.scrollTo(a.getElement(a.state.highlightCountryIndex))}))}},a.handleInput=function(i){var d=i.target.value,C=a.props,$=C.prefix,L=C.onChange,U=a.props.disableCountryCode?"":$,V=a.state.selectedCountry,q=a.state.freezeSelection;if(!a.props.countryCodeEditable){var S=$+(V.hasAreaCodes?a.state.onlyCountries.find((function(De){return De.iso2===V.iso2&&De.mainCode})).dialCode:V.dialCode);if(d.slice(0,S.length)!==S)return}if(d===$)return L&&L("",a.getCountryData(),i,""),a.setState({formattedNumber:""});if(!(d.replace(/\D/g,"").length>15&&(a.props.enableLongNumbers===!1||typeof a.props.enableLongNumbers=="number"&&d.replace(/\D/g,"").length>a.props.enableLongNumbers))&&d!==a.state.formattedNumber){i.preventDefault?i.preventDefault():i.returnValue=!1;var O=a.props.country,K=a.state,P=K.onlyCountries,j=K.selectedCountry,pe=K.hiddenAreaCodes;if(L&&i.persist(),d.length>0){var $e=d.replace(/\D/g,"");(!a.state.freezeSelection||j&&j.dialCode.length>$e.length)&&(V=a.props.disableCountryGuess?j:a.guessSelectedCountry($e.substring(0,6),O,P,pe)||j,q=!1),U=a.formatNumber($e,V),V=V.dialCode?V:j}var Ee=i.target.selectionStart,Ue=i.target.selectionStart,Ge=a.state.formattedNumber,qe=U.length-Ge.length;a.setState({formattedNumber:U,freezeSelection:q,selectedCountry:V},(function(){qe>0&&(Ue-=qe),U.charAt(U.length-1)==")"?a.numberInputRef.setSelectionRange(U.length-1,U.length-1):Ue>0&&Ge.length>=U.length?a.numberInputRef.setSelectionRange(Ue,Ue):Ee<Ge.length&&a.numberInputRef.setSelectionRange(Ee,Ee),L&&L(U.replace(/[^0-9]+/g,""),a.getCountryData(),i,U)}))}},a.handleInputClick=function(i){a.setState({showDropdown:!1}),a.props.onClick&&a.props.onClick(i,a.getCountryData())},a.handleDoubleClick=function(i){var d=i.target.value.length;i.target.setSelectionRange(0,d)},a.handleFlagItemClick=function(i,d){var C=a.state.selectedCountry,$=a.state.onlyCountries.find((function(q){return q==i}));if($){var L=a.state.formattedNumber.replace(" ","").replace("(","").replace(")","").replace("-",""),U=L.length>1?L.replace(C.dialCode,$.dialCode):$.dialCode,V=a.formatNumber(U.replace(/\D/g,""),$);a.setState({showDropdown:!1,selectedCountry:$,freezeSelection:!0,formattedNumber:V,searchValue:""},(function(){a.cursorToEnd(),a.props.onChange&&a.props.onChange(V.replace(/[^0-9]+/g,""),a.getCountryData(),d,V)}))}},a.handleInputFocus=function(i){a.numberInputRef&&a.numberInputRef.value===a.props.prefix&&a.state.selectedCountry&&!a.props.disableCountryCode&&a.setState({formattedNumber:a.props.prefix+a.state.selectedCountry.dialCode},(function(){a.props.jumpCursorToEnd&&setTimeout(a.cursorToEnd,0)})),a.setState({placeholder:""}),a.props.onFocus&&a.props.onFocus(i,a.getCountryData()),a.props.jumpCursorToEnd&&setTimeout(a.cursorToEnd,0)},a.handleInputBlur=function(i){i.target.value||a.setState({placeholder:a.props.placeholder}),a.props.onBlur&&a.props.onBlur(i,a.getCountryData())},a.handleInputCopy=function(i){if(a.props.copyNumbersOnly){var d=window.getSelection().toString().replace(/[^0-9]+/g,"");i.clipboardData.setData("text/plain",d),i.preventDefault()}},a.getHighlightCountryIndex=function(i){var d=a.state.highlightCountryIndex+i;return d<0||d>=a.state.onlyCountries.length+a.state.preferredCountries.length?d-i:a.props.enableSearch&&d>a.getSearchFilteredCountries().length?0:d},a.searchCountry=function(){var i=a.getProbableCandidate(a.state.queryString)||a.state.onlyCountries[0],d=a.state.onlyCountries.findIndex((function(C){return C==i}))+a.state.preferredCountries.length;a.scrollTo(a.getElement(d),!0),a.setState({queryString:"",highlightCountryIndex:d})},a.handleKeydown=function(i){var d=a.props.keys,C=i.target.className;if(C.includes("selected-flag")&&i.which===d.ENTER&&!a.state.showDropdown)return a.handleFlagDropdownClick(i);if(C.includes("form-control")&&(i.which===d.ENTER||i.which===d.ESC))return i.target.blur();if(a.state.showDropdown&&!a.props.disabled&&(!C.includes("search-box")||i.which===d.UP||i.which===d.DOWN||i.which===d.ENTER||i.which===d.ESC&&i.target.value==="")){i.preventDefault?i.preventDefault():i.returnValue=!1;var $=function(L){a.setState({highlightCountryIndex:a.getHighlightCountryIndex(L)},(function(){a.scrollTo(a.getElement(a.state.highlightCountryIndex),!0)}))};switch(i.which){case d.DOWN:$(1);break;case d.UP:$(-1);break;case d.ENTER:a.props.enableSearch?a.handleFlagItemClick(a.getSearchFilteredCountries()[a.state.highlightCountryIndex]||a.getSearchFilteredCountries()[0],i):a.handleFlagItemClick([].concat(B(a.state.preferredCountries),B(a.state.onlyCountries))[a.state.highlightCountryIndex],i);break;case d.ESC:case d.TAB:a.setState({showDropdown:!1},a.cursorToEnd);break;default:(i.which>=d.A&&i.which<=d.Z||i.which===d.SPACE)&&a.setState({queryString:a.state.queryString+String.fromCharCode(i.which)},a.state.debouncedQueryStingSearcher)}}},a.handleInputKeyDown=function(i){var d=a.props,C=d.keys,$=d.onEnterKeyPress,L=d.onKeyDown;i.which===C.ENTER&&$&&$(i),L&&L(i)},a.handleClickOutside=function(i){a.dropdownRef&&!a.dropdownContainerRef.contains(i.target)&&a.state.showDropdown&&a.setState({showDropdown:!1})},a.handleSearchChange=function(i){var d=i.currentTarget.value,C=a.state,$=C.preferredCountries,L=C.selectedCountry,U=0;if(d===""&&L){var V=a.state.onlyCountries;U=a.concatPreferredCountries($,V).findIndex((function(q){return q==L})),setTimeout((function(){return a.scrollTo(a.getElement(U))}),100)}a.setState({searchValue:d,highlightCountryIndex:U})},a.concatPreferredCountries=function(i,d){return i.length>0?B(new Set(i.concat(d))):d},a.getDropdownCountryName=function(i){return i.localName||i.name},a.getSearchFilteredCountries=function(){var i=a.state,d=i.preferredCountries,C=i.onlyCountries,$=i.searchValue,L=a.props.enableSearch,U=a.concatPreferredCountries(d,C),V=$.trim().toLowerCase().replace("+","");if(L&&V){if(/^\d+$/.test(V))return U.filter((function(O){var K=O.dialCode;return["".concat(K)].some((function(P){return P.toLowerCase().includes(V)}))}));var q=U.filter((function(O){var K=O.iso2;return["".concat(K)].some((function(P){return P.toLowerCase().includes(V)}))})),S=U.filter((function(O){var K=O.name,P=O.localName;return O.iso2,["".concat(K),"".concat(P||"")].some((function(j){return j.toLowerCase().includes(V)}))}));return a.scrollToTop(),B(new Set([].concat(q,S)))}return U},a.getCountryDropdownList=function(){var i=a.state,d=i.preferredCountries,C=i.highlightCountryIndex,$=i.showDropdown,L=i.searchValue,U=a.props,V=U.disableDropdown,q=U.prefix,S=a.props,O=S.enableSearch,K=S.searchNotFound,P=S.disableSearchIcon,j=S.searchClass,pe=S.searchStyle,$e=S.searchPlaceholder,Ee=S.autocompleteSearch,Ue=a.getSearchFilteredCountries().map((function(De,Ze){var Z=C===Ze,it=te()({country:!0,preferred:De.iso2==="us"||De.iso2==="gb",active:De.iso2==="us",highlight:Z}),at="flag ".concat(De.iso2);return s.a.createElement("li",Object.assign({ref:function(Je){return a["flag_no_".concat(Ze)]=Je},key:"flag_no_".concat(Ze),"data-flag-key":"flag_no_".concat(Ze),className:it,"data-dial-code":"1",tabIndex:V?"-1":"0","data-country-code":De.iso2,onClick:function(Je){return a.handleFlagItemClick(De,Je)},role:"option"},Z?{"aria-selected":!0}:{}),s.a.createElement("div",{className:at}),s.a.createElement("span",{className:"country-name"},a.getDropdownCountryName(De)),s.a.createElement("span",{className:"dial-code"},De.format?a.formatNumber(De.dialCode,De):q+De.dialCode))})),Ge=s.a.createElement("li",{key:"dashes",className:"divider"});d.length>0&&(!O||O&&!L.trim())&&Ue.splice(d.length,0,Ge);var qe=te()(p({"country-list":!0,hide:!$},a.props.dropdownClass,!0));return s.a.createElement("ul",{ref:function(De){return!O&&De&&De.focus(),a.dropdownRef=De},className:qe,style:a.props.dropdownStyle,role:"listbox",tabIndex:"0"},O&&s.a.createElement("li",{className:te()(p({search:!0},j,j))},!P&&s.a.createElement("span",{className:te()(p({"search-emoji":!0},"".concat(j,"-emoji"),j)),role:"img","aria-label":"Magnifying glass"},"🔎"),s.a.createElement("input",{className:te()(p({"search-box":!0},"".concat(j,"-box"),j)),style:pe,type:"search",placeholder:$e,autoFocus:!0,autoComplete:Ee?"on":"off",value:L,onChange:a.handleSearchChange})),Ue.length>0?Ue:s.a.createElement("li",{className:"no-entries-message"},s.a.createElement("span",null,K)))};var G,z=new de(x.enableAreaCodes,x.enableTerritories,x.regions,x.onlyCountries,x.preferredCountries,x.excludeCountries,x.preserveOrder,x.masks,x.priority,x.areaCodes,x.localization,x.prefix,x.defaultMask,x.alwaysDefaultMask),u=z.onlyCountries,fe=z.preferredCountries,Q=z.hiddenAreaCodes,ge=x.value?x.value.replace(/\D/g,""):"";G=x.disableInitialCountryGuess?0:ge.length>1?a.guessSelectedCountry(ge.substring(0,6),x.country,u,Q)||0:x.country&&u.find((function(i){return i.iso2==x.country}))||0;var ne,Ce=ge.length<2&&G&&!H()(ge,G.dialCode)?G.dialCode:"";ne=ge===""&&G===0?"":a.formatNumber((x.disableCountryCode?"":Ce)+ge,G.name?G:void 0);var ye=u.findIndex((function(i){return i==G}));return a.state={showDropdown:x.showDropdown,formattedNumber:ne,onlyCountries:u,preferredCountries:fe,hiddenAreaCodes:Q,selectedCountry:G,highlightCountryIndex:ye,queryString:"",freezeSelection:!1,debouncedQueryStingSearcher:J()(a.searchCountry,250),searchValue:""},a}var E,Y;return(function(x,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(a&&a.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),a&&Te(x,a)})(y,w),E=y,(Y=[{key:"componentDidMount",value:function(){document.addEventListener&&this.props.enableClickOutside&&document.addEventListener("mousedown",this.handleClickOutside),this.props.onMount&&this.props.onMount(this.state.formattedNumber.replace(/[^0-9]+/g,""),this.getCountryData(),this.state.formattedNumber)}},{key:"componentWillUnmount",value:function(){document.removeEventListener&&this.props.enableClickOutside&&document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(x,a,G){x.country!==this.props.country?this.updateCountry(this.props.country):x.value!==this.props.value&&this.updateFormattedNumber(this.props.value)}},{key:"updateFormattedNumber",value:function(x){if(x===null)return this.setState({selectedCountry:0,formattedNumber:""});var a=this.state,G=a.onlyCountries,z=a.selectedCountry,u=a.hiddenAreaCodes,fe=this.props,Q=fe.country,ge=fe.prefix;if(x==="")return this.setState({selectedCountry:z,formattedNumber:""});var ne,Ce,ye=x.replace(/\D/g,"");if(z&&H()(x,ge+z.dialCode))Ce=this.formatNumber(ye,z),this.setState({formattedNumber:Ce});else{var i=(ne=this.props.disableCountryGuess?z:this.guessSelectedCountry(ye.substring(0,6),Q,G,u)||z)&&H()(ye,ge+ne.dialCode)?ne.dialCode:"";Ce=this.formatNumber((this.props.disableCountryCode?"":i)+ye,ne||void 0),this.setState({selectedCountry:ne,formattedNumber:Ce})}}},{key:"render",value:function(){var x,a,G,z=this,u=this.state,fe=u.onlyCountries,Q=u.selectedCountry,ge=u.showDropdown,ne=u.formattedNumber,Ce=u.hiddenAreaCodes,ye=this.props,i=ye.disableDropdown,d=ye.renderStringAsFlag,C=ye.isValid,$=ye.defaultErrorMessage,L=ye.specialLabel;if(typeof C=="boolean")a=C;else{var U=C(ne.replace(/\D/g,""),Q,fe,Ce);typeof U=="boolean"?(a=U)===!1&&(G=$):(a=!1,G=U)}var V=te()((p(x={},this.props.containerClass,!0),p(x,"react-tel-input",!0),x)),q=te()({arrow:!0,up:ge}),S=te()(p({"form-control":!0,"invalid-number":!a,open:ge},this.props.inputClass,!0)),O=te()({"selected-flag":!0,open:ge}),K=te()(p({"flag-dropdown":!0,"invalid-number":!a,open:ge},this.props.buttonClass,!0)),P="flag ".concat(Q&&Q.iso2);return s.a.createElement("div",{className:"".concat(V," ").concat(this.props.className),style:this.props.style||this.props.containerStyle,onKeyDown:this.handleKeydown},L&&s.a.createElement("div",{className:"special-label"},L),G&&s.a.createElement("div",{className:"invalid-number-message"},G),s.a.createElement("input",Object.assign({className:S,style:this.props.inputStyle,onChange:this.handleInput,onClick:this.handleInputClick,onDoubleClick:this.handleDoubleClick,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onCopy:this.handleInputCopy,value:ne,onKeyDown:this.handleInputKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,type:"tel"},this.props.inputProps,{ref:function(j){z.numberInputRef=j,typeof z.props.inputProps.ref=="function"?z.props.inputProps.ref(j):typeof z.props.inputProps.ref=="object"&&(z.props.inputProps.ref.current=j)}})),s.a.createElement("div",{className:K,style:this.props.buttonStyle,ref:function(j){return z.dropdownContainerRef=j}},d?s.a.createElement("div",{className:O},d):s.a.createElement("div",{onClick:i?void 0:this.handleFlagDropdownClick,className:O,title:Q?"".concat(Q.localName||Q.name,": + ").concat(Q.dialCode):"",tabIndex:i?"-1":"0",role:"button","aria-haspopup":"listbox","aria-expanded":!!ge||void 0},s.a.createElement("div",{className:P},!i&&s.a.createElement("div",{className:q}))),ge&&this.getCountryDropdownList()))}}])&&X(E.prototype,Y),y})(s.a.Component);Fe.defaultProps={country:"",value:"",onlyCountries:[],preferredCountries:[],excludeCountries:[],placeholder:"1 (702) 123-4567",searchPlaceholder:"search",searchNotFound:"No entries to show",flagsImagePath:"./flags.png",disabled:!1,containerStyle:{},inputStyle:{},buttonStyle:{},dropdownStyle:{},searchStyle:{},containerClass:"",inputClass:"",buttonClass:"",dropdownClass:"",searchClass:"",className:"",autoFormat:!0,enableAreaCodes:!1,enableTerritories:!1,disableCountryCode:!1,disableDropdown:!1,enableLongNumbers:!1,countryCodeEditable:!0,enableSearch:!1,disableSearchIcon:!1,disableInitialCountryGuess:!1,disableCountryGuess:!1,regions:"",inputProps:{},localization:{},masks:null,priority:null,areaCodes:null,preserveOrder:[],defaultMask:"... ... ... ... ..",alwaysDefaultMask:!1,prefix:"+",copyNumbersOnly:!0,renderStringAsFlag:"",autocompleteSearch:!1,jumpCursorToEnd:!0,enableAreaCodeStretch:!1,enableClickOutside:!0,showDropdown:!1,isValid:!0,defaultErrorMessage:"",specialLabel:"Phone",onEnterKeyPress:null,keys:{UP:38,DOWN:40,RIGHT:39,LEFT:37,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9}},b.default=Fe}])),Mt}var nr=ar();const or=qt(nr),Vt=W=>{if(W==null)return"";const b=String(W);return b.includes(",")||b.includes('"')||b.includes(`
`)||b.includes("\r")?`"${b.replace(/"/g,'""')}"`:b},sr=W=>{if(!W||W.length===0)return"";const b=["Date","Customer Name","Email","Contact Number","Product/Course","Country","Status","Total Cost","Token Amount","Pending","Currency","Login ID","Sales Person","Lead Person","Lead By","Reference Sale","Created At","Updated At"],h=W.map(f=>{const B=(N,Ae,Te="")=>{try{return Ae.split(".").reduce((Pe,s)=>Pe==null?void 0:Pe[s],N)||Te}catch{return Te}};let re="";f.salesPerson&&(typeof f.salesPerson=="object"?re=f.salesPerson.fullName||f.salesPerson.name||"":re=f.salesPerson||"");let se="";f.leadPerson&&(typeof f.leadPerson=="object"?se=f.leadPerson.fullName||f.leadPerson.name||"":se=f.leadPerson||"");const le=N=>{if(!N)return"";try{return new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return""}},X=f.customerName||B(f,"leadId.name","")||B(f,"leadId.fullName",""),ee=f.product||f.course||B(f,"leadId.course","")||B(f,"leadId.product",""),je=f.contactNumber||B(f,"leadId.phone","");return[le(f.date||f.createdAt||f.saleDate),X,f.email||B(f,"leadId.email",""),je,ee,f.country||B(f,"leadId.country",""),f.status||"",f.totalCost||f.amount||0,f.tokenAmount||0,f.pending||0,f.currency||f.totalCostCurrency||"USD",f.loginId||"",re,se,f.leadBy||"",f.isReference?"Yes":"No",le(f.createdAt),le(f.updatedAt)].map(Vt)});return[b.map(Vt).join(","),...h.map(f=>f.join(","))].join(`
`)},lr=(W,b="sales-export.csv")=>{const p=new Blob(["\uFEFF"+W],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a"),B=URL.createObjectURL(p);f.setAttribute("href",B),f.setAttribute("download",b),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(B)},ir=(W,b)=>{if(!W||W.length===0)throw new Error("No sales data to export");const h=sr(W),p=b||`sales-export-${new Date().toISOString().split("T")[0]}.csv`;lr(h,p)},dr=()=>{var bt,ft,ot;const W={container:{width:"100%"},inputStyle:{width:"100%",height:"42px",padding:"8px 8px 8px 50px",borderRadius:"0.375rem",fontSize:"0.875rem",borderColor:"#D1D5DB"},buttonStyle:{borderTopLeftRadius:"0.375rem",borderBottomLeftRadius:"0.375rem",borderColor:"#D1D5DB"},dropdownStyle:{width:"300px"}},{user:b}=Jt(),[h,p]=ie.useState([]),[f,B]=ie.useState([]),[re,se]=ie.useState(!0),[le,X]=ie.useState(null),[ee,je]=ie.useState(null),[N,Ae]=ie.useState({}),[Te,Pe]=ie.useState(!1),[s,Ie]=ie.useState({leadId:"",totalCost:"",tokenAmount:"",pending:"",product:"",status:"Pending",isReference:!1,customerName:"",email:"",contactNumber:"",country:"",leadPerson:"",countryCode:"+1",loginId:"",password:"",leadBy:"",saleDate:new Date,currency:"USD"}),[J,ae]=ie.useState([]),[T,I]=ie.useState([]),[ce,be]=ie.useState(!1),[H,Ne]=ie.useState([]),[te,Le]=ie.useState(!1),[ve,_e]=ie.useState([]),[v,F]=ie.useState(!1),[_,M]=ie.useState(""),[de,Fe]=ie.useState(!1),[w,y]=ie.useState(new Date().getMonth()+1),[E,Y]=ie.useState(new Date().getFullYear()),[x,a]=ie.useState(!1),[G,z]=ie.useState(!0),[u,fe]=ie.useState({search:"",status:"",country:"",course:"",salesPerson:"",leadPerson:"",dateFrom:"",dateTo:"",amountFrom:"",amountTo:"",currency:""}),[Q,ge]=ie.useState({countries:[],courses:[],salesPersons:[],leadPersons:[],currencies:[]}),ne=[{value:"USD",label:"USD ($)",symbol:"$"},{value:"EUR",label:"EUR (€)",symbol:"€"},{value:"GBP",label:"GBP (£)",symbol:"£"},{value:"INR",label:"INR (₹)",symbol:"₹"},{value:"CAD",label:"CAD ($)",symbol:"$"},{value:"AUD",label:"AUD ($)",symbol:"$"},{value:"JPY",label:"JPY (¥)",symbol:"¥"},{value:"CNY",label:"CNY (¥)",symbol:"¥"}],Ce=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],ye=new Date().getFullYear(),i=Array.from({length:6},(e,o)=>ye-o),d=["Pending","Completed",...(b==null?void 0:b.role)==="Admin"?["Cancelled"]:[]],C=e=>e==="Cancelled"?["Pending","Completed","Cancelled"]:d,[$,L]=ie.useState(null),[U,V]=ie.useState(!1),[q,S]=ie.useState(!1);ie.useEffect(()=>{$e(),P()},[b]),ie.useEffect(()=>{const e=o=>{de&&!o.target.closest(".client-search-container")&&Fe(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[de]),ie.useEffect(()=>{console.log(`Sales data changed: ${h.length} sales available`),console.log("Current filter states:",{showAllSales:G,showCurrentMonth:x,filterMonth:w,filterYear:E}),h.length>0?(O(),K()):(B([]),console.log("No sales data available, clearing filtered sales"))},[h,u,w,E,x,G]),ie.useEffect(()=>{Object.values(u).some(o=>o!=="")&&!q&&S(!0)},[u,q]),ie.useEffect(()=>{!s.isReference&&H.length===0&&Ue()},[s.isReference]);const O=()=>{let e=h.filter(o=>o&&o._id);if(G)console.log("Showing all sales - no date filtering applied");else if(x){const o=new Date().getMonth()+1,l=new Date().getFullYear();e=e.filter(k=>{if(!k||!k.date&&!k.createdAt)return!1;const g=new Date(k.date||k.createdAt),r=g.getMonth()+1,n=g.getFullYear();return r===o&&n===l}),console.log(`Filtered to current month (${o}/${l}): ${e.length} sales`)}else e=e.filter(o=>{if(!o||!o.date&&!o.createdAt)return!1;const l=new Date(o.date||o.createdAt),k=l.getMonth()+1,g=l.getFullYear();return k===w&&g===E}),console.log(`Filtered to selected month (${w}/${E}): ${e.length} sales`);if(u.search){const o=u.search.toLowerCase();e=e.filter(l=>l.customerName&&l.customerName.toLowerCase().includes(o)||l.email&&l.email.toLowerCase().includes(o)||l.product&&l.product.toLowerCase().includes(o)||l.course&&l.course.toLowerCase().includes(o)||l.loginId&&l.loginId.toLowerCase().includes(o)||l.leadBy&&l.leadBy.toLowerCase().includes(o))}if(u.status&&(e=e.filter(o=>o.status===u.status)),u.country&&(e=e.filter(o=>o.country===u.country)),u.course&&(e=e.filter(o=>o.course&&o.course===u.course||o.product&&o.product===u.course)),u.salesPerson&&(e=e.filter(o=>!o||!o.salesPerson?!1:(typeof o.salesPerson=="object"?o.salesPerson._id:o.salesPerson)===u.salesPerson)),u.leadPerson&&(e=e.filter(o=>!o||!o.leadPerson?!1:(typeof o.leadPerson=="object"?o.leadPerson._id:o.leadPerson)===u.leadPerson)),u.dateFrom){const o=new Date(u.dateFrom);e=e.filter(l=>!l||!l.date&&!l.createdAt?!1:new Date(l.date||l.createdAt)>=o)}if(u.dateTo){const o=new Date(u.dateTo);o.setHours(23,59,59,999),e=e.filter(l=>!l||!l.date&&!l.createdAt?!1:new Date(l.date||l.createdAt)<=o)}if(u.amountFrom){const o=parseFloat(u.amountFrom);e=e.filter(l=>l?parseFloat(l.amount||l.totalCost||0)>=o:!1)}if(u.amountTo){const o=parseFloat(u.amountTo);e=e.filter(l=>l?parseFloat(l.amount||l.totalCost||0)<=o:!1)}u.currency&&(e=e.filter(o=>o&&o.currency===u.currency||o&&o.totalCostCurrency===u.currency)),console.log(`Final filtered sales count: ${e.length} out of ${h.length} total sales`),B(e)},K=()=>{const e=[...new Set(h.map(k=>k.country).filter(Boolean))],o=[...new Set(h.map(k=>k.course||k.product).filter(Boolean))],l=[...new Set(h.map(k=>k.currency||k.totalCostCurrency).filter(Boolean))];ge(k=>({...k,countries:e,courses:o,currencies:l}))},P=async()=>{try{const e=await Tt.getUsers("Sales Person"),o=await Tt.getUsers("Lead Person");ge(l=>({...l,salesPersons:e.data.data||[],leadPersons:o.data.data||[]}))}catch(e){console.error("Error fetching user options:",e)}},j=e=>{const{name:o,value:l}=e.target;fe(k=>({...k,[o]:l})),l&&!q&&S(!0)},pe=()=>{fe({search:"",status:"",country:"",course:"",salesPerson:"",leadPerson:"",dateFrom:"",dateTo:"",amountFrom:"",amountTo:"",currency:""}),a(!1),z(!0)},$e=async()=>{try{se(!0),X(null),console.log("Fetching sales data...");const e=await lt.getAllForced();if(e.data&&e.data.success&&Array.isArray(e.data.data)){console.log(`Successfully loaded ${e.data.data.length} sales`);const o=e.data.data.filter(l=>l&&l._id).map(l=>({...l,amount:parseFloat(l.totalCost||l.amount||0),token:parseFloat(l.tokenAmount||l.token||0),pending:l.status==="Completed"?0:parseFloat(l.totalCost||l.amount||0)-parseFloat(l.tokenAmount||l.token||0),product:l.course||l.product||"Unknown",status:l.status||"Pending",currency:l.currency||"USD",date:l.date||l.createdAt,remarks:l.remarks||""}));p(o),B(o),o.length===0&&Se.info("No sales records found.")}else throw new Error("Invalid data format received")}catch(e){console.error("Error fetching sales:",e),X("Failed to fetch sales data"),Se.error("Failed to load sales data")}finally{se(!1)}},Ee=async()=>{try{be(!0);let e=[];if(b.role==="Sales Person"){const l=await Lt.getAssigned();l.data.success&&(e=l.data.data.filter(k=>k.status!=="Converted"))}else{const l=await Lt.getAll();l.data.success&&(e=l.data.data.filter(k=>k.status!=="Converted"))}ae(e);const o=e.map(l=>({value:l._id,label:`${l.name} - ${l.course} (${l.status})`,data:l}));I(o)}catch(e){console.error("Error fetching leads:",e),X("Failed to load leads. Please try again.")}finally{be(!1)}},Ue=async()=>{try{Le(!0);const e=await Tt.getUsers("Lead Person");if(e.data.success){const o=e.data.data.map(l=>({value:l._id,label:l.fullName||l.email}));Ne(o)}}catch(e){console.error("Error fetching lead persons:",e)}finally{Le(!1)}},Ge=async e=>{if(!e||e.length<2){_e([]);return}try{F(!0);const[o,l]=await Promise.all([Lt.getAll(),lt.getAllForced()]),k=[];if(o.data.success&&o.data.data){const r=o.data.data.filter(n=>n.name&&n.name.toLowerCase().includes(e.toLowerCase())).map(n=>({id:n._id,name:n.name,email:n.email||n["E-MAIL"]||"",phone:n.phone||n.NUMBER||"",country:n.country||n.COUNTRY||"",course:n.course||n.COURSE||"",source:"Lead",data:n}));k.push(...r)}if(l.data.success&&l.data.data){const r=l.data.data.filter(n=>n.customerName&&n.customerName.toLowerCase().includes(e.toLowerCase())).map(n=>({id:n._id,name:n.customerName,email:n.email||"",phone:n.contactNumber||"",country:n.country||"",course:n.course||n.product||"",source:"Previous Sale",data:n}));k.push(...r)}const g=k.filter((r,n,c)=>n===c.findIndex(m=>m.name===r.name&&m.email===r.email));_e(g.slice(0,10))}catch(o){console.error("Error searching clients:",o),_e([])}finally{F(!1)}},qe=e=>{Ie(o=>({...o,customerName:e.name,email:e.email,contactNumber:e.phone,country:e.country,product:e.course,countryCode:e.data.countryCode||"+1"})),M(e.name),Fe(!1),_e([])},De=()=>{Ee(),Ue(),Pe(!0),Ie({leadId:"",totalCost:"",tokenAmount:"",pending:"",product:"",status:"Pending",isReference:!1,customerName:"",email:"",contactNumber:"",country:"",leadPerson:"",countryCode:"+1",loginId:"",password:"",leadBy:"",saleDate:new Date,currency:"USD"}),M(""),_e([]),Fe(!1)},Ze=(e,o=null)=>{Ie(e&&o?l=>({...l,leadId:e,product:o.course||o.COURSE||"",_selectedLead:o}):l=>({...l,leadId:"",product:"",_selectedLead:null}))},Z=(e,o)=>{Ie(l=>{const k={...l,[e]:o};if(e==="amount"||e==="totalCost"||e==="token"||e==="tokenAmount"){let g=0;e==="amount"||e==="totalCost"?g=parseFloat(o||0)||0:g=parseFloat(l.amount||l.totalCost||0)||0;let r=0;e==="token"||e==="tokenAmount"?r=parseFloat(o||0)||0:r=parseFloat(l.token||l.tokenAmount||0)||0,k.pending=(g-r).toFixed(2)}return e==="status"&&o==="Completed"&&(k.pending="0"),k})},it=e=>{Ie({...s,isReference:e,leadId:e?"":s.leadId,customerName:e?s.customerName:"",contactNumber:e?s.contactNumber:"",email:e?s.email:"",country:e?s.country:"",countryCode:e?s.countryCode:"+1"}),!e&&H.length===0&&Ue()},at=async e=>{var o,l,k;e.preventDefault();try{if(s.isReference){if(!s.customerName){X("Please enter customer name");return}if(!s.contactNumber){X("Please enter contact number");return}if(!s.product){X("Please enter a product/course name");return}if(!s.country){X("Please enter country");return}}else{if(!s.leadId){X("Please select a lead");return}if(!s.product){X("Please enter a product/course name");return}if(!s.leadPerson){X("Please select a lead person who will see this sale");return}}if(!localStorage.getItem("token")){X("Authentication required. Please log in again.");return}let r;if(s.isReference)r={customerName:s.customerName,country:s.country,course:s.product,countryCode:s.countryCode||"+1",contactNumber:s.contactNumber||"",email:s.email||"",salesPerson:b._id,leadPerson:s.leadPerson,loginId:s.loginId||"",password:s.password||"",leadBy:s.leadBy||"",source:"Reference",isReference:!0,totalCost:parseFloat(s.totalCost||0)||0,tokenAmount:parseFloat(s.tokenAmount||0)||0,currency:s.currency||"USD",pending:s.status==="Completed"?!1:parseFloat(s.pending)>0,status:s.status||"Pending",createdBy:b._id,date:s.saleDate||new Date,isLeadPersonSale:!0};else{const c=s._selectedLead||J.find(m=>m._id===s.leadId);if(!c){X("Lead information not found. Please select a lead again.");return}r={customerName:c.name||c.NAME||c.customerName||"Unknown",country:c.country||c.COUNTRY||"Unknown",course:s.product,countryCode:c.countryCode||c.CODE||"+1",contactNumber:c.phone||c.contactNumber||c.NUMBER||c.MOBILE||"",email:c.email||c["E-MAIL"]||c.EMAIL||"",salesPerson:b._id,leadPerson:s.leadPerson,loginId:s.loginId||"",password:s.password||"",leadBy:s.leadBy||"",source:c.source||c.SOURSE||"",clientRemark:c.client||c["CLIENT REMARK"]||"",totalCost:parseFloat(s.totalCost||0)||0,tokenAmount:parseFloat(s.tokenAmount||0)||0,currency:s.currency||"USD",pending:s.status==="Completed"?!1:parseFloat(s.pending)>0,status:s.status||"Pending",createdBy:b._id,date:s.saleDate||new Date,isLeadPersonSale:!0}}console.log("Creating sale with data:",r),console.log("Email being sent:",r.email),console.log("Contact number being sent:",r.contactNumber);const n=await lt.create({...r,isLeadPersonSale:!0});if(n.data&&n.data.success){p(c=>[n.data.data,...c]);try{await zt.logSaleCreate(n.data.data)}catch(c){console.error("Error logging sale creation:",c)}Pe(!1),Ie({leadId:"",totalCost:"",tokenAmount:"",pending:"",product:"",status:"Pending",isReference:!1,customerName:"",email:"",contactNumber:"",country:"",leadPerson:"",countryCode:"+1",loginId:"",password:"",leadBy:"",saleDate:new Date,currency:"USD"}),Se.success("Sale added successfully!"),He()}else X(((o=n.data)==null?void 0:o.message)||"Failed to add sale")}catch(g){if(g.response)if(g.response.status===400){const r=((l=g.response.data)==null?void 0:l.message)||"Invalid data";r.includes("enum value for path `status`")?Se.error(`Invalid status value. Allowed values are: ${d.join(", ")}`):Se.error(`Bad request: ${r}`)}else g.response.status===401?X("Authentication failed. Please log in again."):X(`Failed to add sale: ${((k=g.response.data)==null?void 0:k.message)||g.message}`);else X("Network error while adding sale")}},Je=(e,o)=>e?typeof e[o]=="string"?e[o]:e[o]&&e[o]._id?typeof e[o]._id=="object"&&e[o]._id.toString?e[o]._id.toString():e[o]._id:e[o]&&typeof e[o].id=="string"?e[o].id:e[o]&&typeof e[o]=="object"&&e[o].toString?e[o].toString():null:null,At=e=>{if(!e||!e._id){console.error("Invalid sale object:",e),Se.error("Cannot edit this sale - invalid data");return}je(e._id),Ae({amount:parseFloat(Number(e.amount||e.totalCost||0).toFixed(2)),token:parseFloat(Number(e.token||e.tokenAmount||0).toFixed(2)),pending:parseFloat(Number(e.pending||(e.amount||e.totalCost||0)-(e.token||e.tokenAmount||0)).toFixed(2)),status:e.status||"Pending",product:e.product||e.course||"",saleDate:e.date||new Date,loginId:e.loginId||"",password:e.password||"",leadBy:e.leadBy||"",currency:e.currency||"USD",remarks:e.remarks||""})},xt=async e=>{var o,l,k,g,r;try{const n=h.find(D=>D&&D._id===e);if(!n){X("Sale not found");return}const c={customerName:n.customerName,country:n.country,course:N.product||n.course,countryCode:n.countryCode,contactNumber:n.contactNumber,email:n.email,salesPerson:N.salesPerson||((o=n.salesPerson)==null?void 0:o._id)||n.salesPerson,leadPerson:((l=n.leadPerson)==null?void 0:l._id)||n.leadPerson,source:n.source,clientRemark:n.clientRemark,totalCost:parseFloat(N.amount)||n.totalCost,tokenAmount:parseFloat(N.token)||n.tokenAmount,currency:N.currency||n.currency,status:N.status||n.status,remarks:N.remarks!==void 0?N.remarks:n.remarks||"",isReference:n.isReference||!1,date:N.saleDate||n.date,loginId:N.loginId||n.loginId||"",password:N.password||n.password||"",leadBy:N.leadBy||n.leadBy||"",updatedBy:b._id,updatedAt:new Date},m=await lt.update(e,c);if(m.data&&m.data.success){try{await zt.logSaleUpdate(e,c)}catch(A){console.error("Error logging sale update:",A)}const D=m.data.data;p(A=>A.map(R=>R&&R._id===e?D:R)),B(A=>A.map(R=>R&&R._id===e?D:R)),je(null),Ae({}),Se.success("Sale updated successfully")}else Se.error(((k=m.data)==null?void 0:k.message)||"Failed to update sale")}catch(n){console.error("Error updating sale:",n),Se.error(((r=(g=n.response)==null?void 0:g.data)==null?void 0:r.message)||"Error updating sale")}},xe=(e,o)=>{Ae(l=>{const k={...l,[e]:o};if(e==="amount"||e==="token"){const g=parseFloat(Number(e==="amount"?o:l.amount).toFixed(2))||0,r=parseFloat(Number(e==="token"?o:l.token).toFixed(2))||0;k.pending=parseFloat((g-r).toFixed(2))}return e==="status"&&o==="Completed"&&(k.pending=0),k})},nt=e=>{if(!e||!b||!b._id||!b.role)return!1;const o=Je(e,"salesPerson"),l=b._id;if(b.role==="Sales Person")return o&&l&&o.toString()===l.toString();if(b.role==="Lead Person"){const k=Je(e,"leadPerson");return k&&l&&k.toString()===l.toString()}return["Admin","Manager"].includes(b.role)},ct=e=>{if(!e||!b||!b._id||!b.role)return!1;const o=Je(e,"salesPerson"),l=b._id;return b.role==="Sales Person"?o&&l&&o.toString()===l.toString():["Admin","Manager"].includes(b.role)},Xe=e=>new Date(e).toLocaleDateString(),Ke=e=>{y(parseInt(e.target.value)),a(!1),z(!1)},vt=e=>{Y(parseInt(e.target.value)),a(!1),z(!1)},dt=()=>{const e=new Date;y(e.getMonth()+1),Y(e.getFullYear()),a(!0),z(!1)},kt=()=>{z(!G),G||a(!1)},wt=async(e,o)=>{try{const l=h.find(r=>r._id===e);if(!l)return;if(!nt(l)){Se.error("You don't have permission to update this sale");return}if(o==="Cancelled"&&(b==null?void 0:b.role)!=="Admin"){Se.error("Only administrators can cancel sales");return}je(e);const k={status:o,remarks:l.remarks||"",updatedBy:b.id};(await lt.update(e,k)).data.success?(p(r=>r.map(n=>n._id===e?{...n,status:o}:n)),Se.success("Status updated successfully")):Se.error("Failed to update status")}catch(l){console.error("Error updating status:",l),Se.error("Error updating status")}finally{je(null)}},It=(e,o)=>{if(e)try{let l=e.toString().replace(/\D/g,"");const k=o?o.toString().replace(/^\+/,""):"1";if(l.startsWith(k)){const g=`https://wa.me/${l}`;window.open(g,"_blank","noopener,noreferrer")}else{const g=`https://wa.me/${k}${l}`;window.open(g,"_blank","noopener,noreferrer")}}catch{Se.error("Could not open WhatsApp. Please try again.")}},ut=e=>{e&&(window.location.href=`mailto:${e}`)},He=async()=>{try{p([]),B([]),se(!0);const e=new Date().getTime(),o=await lt.getAllForced();if(o.data&&o.data.success){if(!Array.isArray(o.data.data)){console.error("RefreshData: Sales data is not an array:",o.data.data),Se.error("Invalid data format received from server");return}const l=o.data.data.filter(r=>r&&typeof r=="object"&&r._id!==null&&r._id!==void 0&&r._id!=="");console.log(`RefreshData: Original array length: ${o.data.data.length}, Valid sales: ${l.length}`),o.data.data.length!==l.length&&console.log(`RefreshData: Filtered out ${o.data.data.length-l.length} null/invalid sales from ${o.data.data.length} total`);const g=l.map(r=>!r||!r._id?(console.error("Null sale in refreshData processing:",r),null):{...r,_id:r._id,salesPerson:typeof r.salesPerson=="object"&&r.salesPerson._id||r.salesPerson,amount:parseFloat(r.totalCost||0),token:parseFloat(r.tokenAmount||0),pending:r.status==="Completed"?0:parseFloat(r.totalCost||0)-parseFloat(r.tokenAmount||0),product:r.course||r.product||"Unknown",status:r.status||"Pending",loginId:r.loginId||"",password:r.password||"",leadBy:r.leadBy||"",currency:r.currency||"USD",date:r.date||r.createdAt,remarks:r.remarks||""}).filter(r=>r!==null);p(g)}else Se.error("Failed to refresh sales data. Please try again.")}catch{Se.error("Failed to refresh data. Please reload the page.")}finally{se(!1),Te&&Ee()}},ze=(e,o,l="N/A")=>{if(!e)return l;const k=o.split(".");let g=e;for(const r of k){if(g==null||typeof g!="object")return l;g=g[r]}return g??l},jt=e=>e?e.customerName||ze(e,"leadId.name")||ze(e,"leadId.NAME")||"Unknown Customer":"N/A",mt=(e,o="USD")=>`${(ne.find(g=>g.value===o)||ne[0]).symbol}${parseFloat(e||0).toFixed(2)}`,Me=(e="USD")=>(ne.find(l=>l.value===e)||ne[0]).symbol,ht=async e=>{try{if(!window.confirm("Are you sure you want to delete this sale?"))return;(await lt.delete(e)).data.success?(p(l=>l.filter(k=>k._id!==e)),B(l=>l.filter(k=>k._id!==e)),Se.success("Sale deleted successfully")):Se.error("Failed to delete sale")}catch(o){console.error("Error deleting sale:",o),Se.error("Error deleting sale")}};return t.jsxs(Ht,{children:[t.jsxs("div",{className:"w-full p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold",children:"Sales Tracking"}),t.jsxs("div",{className:"flex gap-2",children:[((b==null?void 0:b.role)==="Admin"||(b==null?void 0:b.role)==="Manager")&&t.jsxs("button",{onClick:()=>{try{if(!f||f.length===0){Se.error("No sales data to export");return}let o=`sales-export-${new Date().toISOString().split("T")[0]}`;(Object.values(u).some(k=>k!=="")||!G||x)&&(o+="-filtered"),o+=".csv",ir(f,o),Se.success(`Exported ${f.length} sales to CSV`)}catch(e){console.error("Error exporting CSV:",e),Se.error("Failed to export CSV: "+(e.message||"Unknown error"))}},className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition duration-300 flex items-center gap-2",disabled:re||!f||f.length===0,title:"Export filtered sales data to CSV (Google Sheets compatible)",children:[t.jsx(Qt,{}),re||!f||f.length===0?"Export":`Export (${f.length})`]}),t.jsx("button",{onClick:$e,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition duration-300",disabled:re,children:re?"Loading...":"Refresh"}),t.jsx("button",{onClick:De,className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition duration-300",children:"Add New Sale"})]})]}),le&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 border border-red-200 rounded-md",children:le}),!re&&t.jsxs("div",{className:"mb-4 p-3 bg-blue-50 text-blue-700 border border-blue-200 rounded-md text-sm",children:[t.jsx("strong",{children:"Debug Info:"})," Total Sales: ",h.length," | Filtered Sales: ",f.length," | Show All:"," ",G?"Yes":"No"," | Show Current Month:"," ",x?"Yes":"No"," | Filter Month/Year: ",w,"/",E]}),re?t.jsxs("div",{className:"text-center py-10",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),t.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-500",children:"Loading sales data..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out border border-slate-200 dark:border-slate-700 rounded-lg shadow-md dark:shadow-2xl mb-6 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("h2",{className:"text-lg font-medium",children:"Advanced Filters"}),Object.values(u).some(e=>e!=="")&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Object.values(u).filter(e=>e!=="").length," ","active"]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:pe,className:"text-sm text-blue-600 hover:underline",children:"Reset All"}),t.jsxs("button",{onClick:()=>S(!q),className:"flex items-center text-sm text-gray-600 dark:text-gray-200 hover:text-gray-800",children:[q?"Hide Filters":"Show Filters",t.jsx("svg",{className:`ml-1 h-4 w-4 transform transition-transform ${q?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),q&&t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Search"}),t.jsx("input",{type:"text",id:"search",name:"search",placeholder:"Search customer, email, product...",value:u.search,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{id:"status",name:"status",value:u.status,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Statuses"}),d.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),((b==null?void 0:b.role)==="Admin"||(b==null?void 0:b.role)==="Manager")&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"salesPerson",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Sales Person"}),t.jsxs("select",{id:"salesPerson",name:"salesPerson",value:u.salesPerson,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Sales Persons"}),Q.salesPersons.map(e=>t.jsx("option",{value:e._id,children:e.fullName},e._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Country"}),t.jsxs("select",{id:"country",name:"country",value:u.country,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Countries"}),Q.countries.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Course/Product"}),t.jsxs("select",{id:"course",name:"course",value:u.course,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Courses"}),Q.courses.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"leadPerson",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Lead Person"}),t.jsxs("select",{id:"leadPerson",name:"leadPerson",value:u.leadPerson,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Lead Persons"}),Q.leadPersons.map(e=>t.jsx("option",{value:e._id,children:e.fullName},e._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Date From"}),t.jsx("input",{type:"date",id:"dateFrom",name:"dateFrom",value:u.dateFrom,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Date To"}),t.jsx("input",{type:"date",id:"dateTo",name:"dateTo",value:u.dateTo,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"amountFrom",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Amount From"}),t.jsx("input",{type:"number",id:"amountFrom",name:"amountFrom",placeholder:"Min amount",value:u.amountFrom,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"amountTo",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Amount To"}),t.jsx("input",{type:"number",id:"amountTo",name:"amountTo",placeholder:"Max amount",value:u.amountTo,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Currency"}),t.jsxs("select",{id:"currency",name:"currency",value:u.currency,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"All Currencies"}),ne.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-slate-800 rounded-md",children:t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:[t.jsx("strong",{children:f.length})," sales found from a total of ",t.jsx("strong",{children:h.length})," sales",Object.values(u).some(e=>e!=="")&&t.jsx("span",{className:"ml-2 text-blue-600",children:"(Filters applied)"})]})})]})]}),t.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg shadow-md dark:shadow-2xl transition-all duration-200 ease-out shadow-sm",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Quick Date Filters"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-600 dark:text-gray-500 mb-1",children:"Month"}),t.jsx("select",{id:"month",value:w,onChange:Ke,className:"border border-gray-300 dark:border-slate-600 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",disabled:x,children:Ce.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-600 dark:text-gray-500 mb-1",children:"Year"}),t.jsx("select",{id:"year",value:E,onChange:vt,className:"border border-gray-300 dark:border-slate-600 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",disabled:x,children:i.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"flex items-center ml-4",children:[t.jsx("input",{id:"currentMonth",type:"checkbox",checked:x,onChange:()=>{a(!x),x||z(!1)},className:"h-4 w-4 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 border-gray-300 dark:border-slate-600 rounded"}),t.jsx("label",{htmlFor:"currentMonth",className:"ml-2 block text-sm text-gray-700 dark:text-gray-400",children:"Show Current Month Only"})]}),((b==null?void 0:b.role)==="Manager"||(b==null?void 0:b.role)==="Admin")&&t.jsxs("div",{className:"flex items-center ml-4",children:[t.jsx("input",{id:"showAllSales",type:"checkbox",checked:G,onChange:kt,className:"h-4 w-4 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 border-gray-300 dark:border-slate-600 rounded"}),t.jsx("label",{htmlFor:"showAllSales",className:"ml-2 block text-sm text-gray-700 dark:text-gray-400 font-semibold text-blue-600",children:"Show All Sales (No Date Filter)"})]}),t.jsx("button",{onClick:dt,className:"bg-gray-200 dark:bg-slate-600 hover:bg-gray-300 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-md ml-auto transition duration-300",children:"Reset to Current Month"})]}),t.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-gray-500",children:[G?t.jsx("p",{children:"Quick filter: All sales regardless of date"}):x?t.jsxs("p",{children:["Quick filter: Current month (",Ce[new Date().getMonth()].label," ",new Date().getFullYear(),")"]}):t.jsxs("p",{children:["Quick filter: ",Ce[w-1].label," ",E]}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-400 mt-1",children:"Note: Advanced filters above will further refine these results"})]})]}),Object.values(u).some(e=>e!=="")&&t.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Active Filters:"}),u.search&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',u.search,'"']}),u.status&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Status: ",u.status]}),u.salesPerson&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Sales Person:"," ",(bt=Q.salesPersons.find(e=>e._id===u.salesPerson))==null?void 0:bt.fullName]}),u.country&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Country: ",u.country]}),u.course&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Course: ",u.course]}),u.leadPerson&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Lead Person:"," ",(ft=Q.leadPersons.find(e=>e._id===u.leadPerson))==null?void 0:ft.fullName]}),(u.dateFrom||u.dateTo)&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Date: ",u.dateFrom||"Start"," to"," ",u.dateTo||"End"]}),(u.amountFrom||u.amountTo)&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Amount: ",u.amountFrom||"0"," -"," ",u.amountTo||"∞"]}),u.currency&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Currency: ",u.currency]})]})}),t.jsx("div",{className:"overflow-x-hidden bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg shadow-md dark:shadow-2xl transition-all duration-200 ease-out shadow-sm",children:t.jsx("div",{className:"w-full overflow-x-auto",children:t.jsxs("table",{className:"min-w-full table-auto border-collapse divide-y divide-slate-200 dark:divide-slate-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"#"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Lead"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Contact/Login"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Product"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Sales Person"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Amount"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Token"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Pending"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Remarks"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map((e,o)=>{var l,k;return t.jsxs("tr",{onClick:()=>At(e),className:`cursor-pointer ${o%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"}`,children:[t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words text-sm text-gray-500 dark:text-gray-400",children:o+1}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("input",{type:"date",value:N.saleDate?new Date(N.saleDate).toISOString().split("T")[0]:new Date(e.date||e.createdAt).toISOString().split("T")[0],onChange:g=>xe("saleDate",new Date(g.target.value)),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>xt(e._id),className:"text-green-600 hover:text-green-900 flex items-center text-xs px-2 py-1 bg-green-50 rounded",children:[t.jsx(Zt,{className:"mr-1"})," Save"]}),t.jsxs("button",{onClick:()=>{je(null),Ae({})},className:"text-red-600 hover:text-red-900 flex items-center text-xs px-2 py-1 bg-red-50 rounded",children:[t.jsx(Xt,{className:"mr-1"})," Cancel"]})]})]}):t.jsx("div",{className:"flex flex-col space-y-2",children:t.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:Xe(e.date||e.createdAt||new Date)})})}),t.jsxs("td",{className:"px-2 py-2 whitespace-normal break-words",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:jt(e)}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.product||ze(e,"leadId.course")||"No product"}),ee===e._id&&t.jsxs("div",{className:"mt-2",children:[t.jsx("input",{type:"text",placeholder:"Lead By (Optional)",value:N.leadBy||"",onChange:g=>xe("leadBy",g.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-gray-400 dark:text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:"Name of person who led this sale"})]})]}),!ee===e._id&&e.leadBy&&t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-500 mt-1",children:["Lead By: ",e.leadBy]})]}),t.jsx("td",{className:"px-2 py-2",children:t.jsxs("div",{className:"flex flex-col space-y-1",children:[(e.contactNumber||ze(e,"leadId.phone"))&&t.jsx("div",{className:"flex items-center",children:t.jsxs("button",{onClick:()=>It(e.contactNumber||ze(e,"leadId.phone"),e.countryCode||ze(e,"leadId.countryCode","+91")),className:"text-sm text-gray-900 dark:text-white flex items-center hover:text-green-600",title:"Open in WhatsApp",children:[t.jsx(er,{className:"mr-1 text-green-500"}),(()=>{const g=e.contactNumber||ze(e,"leadId.phone"),r=e.countryCode||ze(e,"leadId.countryCode","+91");return g&&g.toString().startsWith("+")?g:g&&r&&g.toString().startsWith(r.replace("+",""))?`+${g}`:`${r} ${g}`})()]})}),(e.email||ze(e,"leadId.email"))&&t.jsx("div",{className:"flex items-center",children:t.jsxs("button",{onClick:()=>ut(e.email||ze(e,"leadId.email")),className:"text-sm text-gray-500 dark:text-gray-500 flex items-center hover:text-blue-600",title:"Send email",children:[t.jsx(tr,{className:"mr-1 text-blue-500"}),e.email||ze(e,"leadId.email")]})}),ee===e._id&&t.jsxs("div",{className:"mt-2 flex flex-col space-y-2",children:[t.jsx("input",{type:"text",placeholder:"Login ID (Optional)",value:N.loginId||"",onChange:g=>xe("loginId",g.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),t.jsx("input",{type:"text",placeholder:"Password (Optional)",value:N.password||"",onChange:g=>xe("password",g.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),!ee===e._id&&(e.loginId||e.password)&&t.jsxs("div",{className:"mt-2 text-xs",children:[e.loginId&&t.jsxs("div",{children:["Login ID: ",e.loginId]}),e.password&&t.jsxs("div",{children:["Password: ",e.password]})]})]})}),t.jsxs("td",{className:"px-2 py-2 whitespace-normal break-words",children:[ee===e._id?t.jsxs("div",{children:[t.jsx("input",{type:"text",value:N.product||"",onChange:g=>xe("product",g.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Product or course name"}),e.leadPerson&&typeof e.leadPerson=="object"&&e.leadPerson.fullName?t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Lead Person: ",e.leadPerson.fullName]}):e.isReference?t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Lead Person: Reference"}):null]}):t.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:e.product||ze(e,"course")||"N/A"}),!ee===e._id&&(e.leadPerson&&typeof e.leadPerson=="object"&&e.leadPerson.fullName?t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Lead Person: ",e.leadPerson.fullName]}):e.isReference?t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Lead Person: Reference"}):null)]}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsx("div",{className:"flex flex-col space-y-2",children:t.jsxs("select",{value:N.salesPerson||((l=e.salesPerson)==null?void 0:l._id)||"",onChange:g=>xe("salesPerson",g.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[t.jsx("option",{value:"",children:"Select Sales Person"}),Q.salesPersons.map(g=>t.jsx("option",{value:g._id,children:g.fullName},g._id))]})}):t.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:((k=e.salesPerson)==null?void 0:k.fullName)||"N/A"})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsx("div",{className:"flex flex-col space-y-2",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(N.currency)}),t.jsx("input",{id:"amount",type:"number",value:N.amount!==void 0?N.amount.toString():"0",onChange:g=>xe("amount",g.target.value),className:"w-24 px-2 pl-7 border border-gray-300 dark:border-slate-600 rounded"})]}),t.jsx("select",{value:N.currency||"USD",onChange:g=>xe("currency",g.target.value),className:"border border-gray-300 dark:border-slate-600 rounded p-1 text-xs",children:ne.map(g=>t.jsx("option",{value:g.value,children:g.label},g.value))})]})}):t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:mt(e.amount||e.totalCost||0,e.currency||"USD")})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(N.currency)}),t.jsx("input",{id:"token",type:"number",value:N.token!==void 0?N.token.toString():"0",onChange:g=>xe("token",g.target.value),className:"w-24 px-2 pl-7 border border-gray-300 dark:border-slate-600 rounded"})]}):t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:mt(e.token||e.tokenAmount||0,e.currency||"USD")})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(N.currency)}),t.jsx("input",{id:"pending",type:"number",value:N.pending!==void 0?N.pending.toString():"0",onChange:g=>xe("pending",g.target.value),className:"w-24 px-2 pl-7 border border-gray-300 dark:border-slate-600 rounded",disabled:N.status==="Completed"})]}):t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:mt(e.status==="Completed"?0:e.pending!==void 0?e.pending:(e.amount||e.totalCost||0)-(e.token||e.tokenAmount||0),e.currency||"USD")})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words",children:ee===e._id?t.jsx("select",{value:N.status||e.status,onChange:g=>xe("status",g.target.value),className:`text-sm px-2 py-1 rounded cursor-pointer ${e.status==="Pending"?"bg-yellow-100 text-yellow-800":e.status==="Completed"?"bg-green-100 text-green-800":e.status==="Cancelled"?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-gray-200"} border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400`,disabled:!nt(e),children:C(e.status).map(g=>t.jsx("option",{value:g,children:g},g))}):t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:e.status||"Pending",onChange:g=>wt(e._id,g.target.value),className:`text-sm px-2 py-1 rounded cursor-pointer appearance-none w-auto pr-8 ${e.status==="Pending"?"bg-yellow-100 text-yellow-800":e.status==="Completed"?"bg-green-100 text-green-800":e.status==="Cancelled"?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-gray-200"} border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400`,disabled:!nt(e),children:C(e.status).map(g=>t.jsx("option",{value:g,children:g},g))}),t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-400",children:t.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})}),!nt(e)&&t.jsx("div",{className:"absolute left-0 -bottom-5 w-full",children:t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 italic",children:(b==null?void 0:b.role)==="Sales Person"?"Can only update your own sales":"No edit permission"})})]})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words text-sm text-gray-500 dark:text-gray-400",children:ee===e._id?t.jsxs("div",{className:"space-y-2",children:[t.jsx("textarea",{value:N.remarks||"",onChange:g=>xe("remarks",g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Enter remarks (optional - leave blank to clear)",rows:"2"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Optional - leave blank to clear remarks"})]}):t.jsx("div",{className:"text-sm max-w-xs overflow-hidden",children:e.remarks||"-"})}),t.jsx("td",{className:"px-2 py-2 whitespace-normal break-words text-sm text-gray-500 dark:text-gray-400",children:t.jsx("div",{className:"flex items-center space-x-2",children:ct(e)&&t.jsx("button",{onClick:()=>ht(e._id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors duration-150",title:"Delete sale",children:t.jsx(rr,{className:"h-5 w-5"})})})})]},e._id)})})]})})})]}),Te&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg dark:shadow-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-sm",children:[t.jsxs("div",{className:"bg-green-600 text-white p-4 flex justify-between items-center",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Add New Sale"}),t.jsx("button",{onClick:()=>Pe(!1),className:"text-white hover:text-gray-200 text-2xl",children:"×"})]}),t.jsxs("form",{onSubmit:at,className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"col-span-2 mb-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-400",children:"Sale Type:"}),t.jsxs("div",{className:"flex border border-gray-300 dark:border-slate-600 rounded-md overflow-hidden",children:[t.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${s.isReference?"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 dark:text-gray-400":"bg-blue-600 text-white"}`,onClick:()=>it(!1),children:"From Lead"}),t.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${s.isReference?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 dark:text-gray-400"}`,onClick:()=>it(!0),children:"From Reference"})]})]})}),!s.isReference&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"col-span-2",children:[t.jsxs("label",{htmlFor:"leadId",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:["Lead",t.jsx("span",{className:"ml-1 text-xs text-blue-600 font-normal",children:"(Search existing leads)"})]}),t.jsxs("div",{className:"relative mt-1 client-search-container",children:[t.jsx("input",{id:"leadId",type:"text",value:_||(s.leadId?(ot=J.find(e=>e._id===s.leadId))==null?void 0:ot.name:""),onChange:e=>{const o=e.target.value;M(o),o.length>=2?(Ge(o),Fe(!0)):(Fe(!1),_e([]),o||Z("leadId",""))},onFocus:()=>{_.length>=2&&Fe(!0)},className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Type to search existing leads..."}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:v?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):t.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),de&&ve.length>0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ve.map((e,o)=>t.jsx("div",{onClick:()=>{e.source==="Lead"&&Ze(e.id,e.data),M(e.name),Fe(!1),_e([])},className:"px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.email&&t.jsxs("span",{children:["📧 ",e.email]}),e.phone&&t.jsxs("span",{className:"ml-2",children:["📞 ",e.phone]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.country&&t.jsxs("span",{children:["🌍 ",e.country]}),e.course&&t.jsxs("span",{className:"ml-2",children:["📚 ",e.course]})]})]}),t.jsx("div",{className:"ml-2",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.source==="Lead"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:e.source})})]})},`${e.id}-${o}`))}),de&&_.length>=2&&ve.length===0&&!v&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg p-4",children:t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:['No existing leads found for "',_,'"']})})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:"Start typing to search for existing leads or previous clients"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsxs("label",{htmlFor:"leadPerson",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:["Lead Person",t.jsx("span",{className:"ml-1 text-xs text-blue-600 font-normal",children:"(Who should see this sale on their dashboard)"})]}),t.jsxs("select",{id:"leadPerson",value:s.leadPerson,onChange:e=>Z("leadPerson",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a lead person"}),H.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]}),te&&t.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-500",children:"Loading lead persons..."}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:"The selected lead person will see this sale on their dashboard"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"saleDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Sale Date"}),t.jsx("input",{id:"saleDate",type:"date",value:s.saleDate?new Date(s.saleDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],onChange:e=>Z("saleDate",new Date(e.target.value)),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsxs("label",{htmlFor:"leadBy",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:["Lead By (Optional)",t.jsxs("span",{className:"ml-1 inline-block relative group",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400 dark:text-gray-400 cursor-help",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-48 bg-gray-800 text-white text-xs rounded py-1 px-2 hidden group-hover:block",children:"Name of the person who led this sale (can be different from the Lead Person assigned in the system)"})]})]}),t.jsx("input",{id:"leadBy",type:"text",value:s.leadBy,onChange:e=>Z("leadBy",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Who led this sale?"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Product"}),t.jsx("input",{id:"product",type:"text",value:s.product,onChange:e=>Z("product",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Product or course name"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"loginId",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Login ID (Optional)"}),t.jsx("input",{id:"loginId",type:"text",value:s.loginId,onChange:e=>Z("loginId",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Customer login ID"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Password (Optional)"}),t.jsx("input",{id:"password",type:"text",value:s.password,onChange:e=>Z("password",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Customer password"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Currency"}),t.jsx("select",{id:"currency",value:s.currency,onChange:e=>Z("currency",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:ne.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Amount"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"amount",type:"number",value:s.totalCost,onChange:e=>Z("totalCost",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Token"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"token",type:"number",value:s.tokenAmount,onChange:e=>Z("tokenAmount",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"pending",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Pending"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"pending",type:"number",value:s.pending,onChange:e=>Z("pending",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00",disabled:s.status==="Completed"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Status"}),t.jsx("select",{id:"status",value:s.status,onChange:e=>Z("status",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:d.map(e=>t.jsx("option",{value:e,children:e},e))})]})]}),s.isReference&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsxs("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:["Customer Name",t.jsx("span",{className:"ml-1 text-xs text-blue-600 font-normal",children:"(Search existing clients)"})]}),t.jsxs("div",{className:"relative mt-1 client-search-container",children:[t.jsx("input",{id:"customerName",type:"text",value:_||s.customerName,onChange:e=>{const o=e.target.value;M(o),Z("customerName",o),o.length>=2?(Ge(o),Fe(!0)):(Fe(!1),_e([]))},onFocus:()=>{_.length>=2&&Fe(!0)},className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Type to search existing clients..."}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:v?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):t.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),de&&ve.length>0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ve.map((e,o)=>t.jsx("div",{onClick:()=>qe(e),className:"px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.email&&t.jsxs("span",{children:["📧 ",e.email]}),e.phone&&t.jsxs("span",{className:"ml-2",children:["📞 ",e.phone]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.country&&t.jsxs("span",{children:["🌍 ",e.country]}),e.course&&t.jsxs("span",{className:"ml-2",children:["📚 ",e.course]})]})]}),t.jsx("div",{className:"ml-2",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.source==="Lead"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:e.source})})]})},`${e.id}-${o}`))}),de&&_.length>=2&&ve.length===0&&!v&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg p-4",children:t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:['No existing clients found for "',_,'"']})})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:"Start typing to search for existing clients from leads or previous sales"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"saleDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Sale Date"}),t.jsx("input",{id:"saleDate",type:"date",value:s.saleDate?new Date(s.saleDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],onChange:e=>Z("saleDate",new Date(e.target.value)),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Contact Number"}),t.jsx(or,{country:"us",value:s.contactNumber,onChange:(e,o)=>{Z("contactNumber",e),Z("countryCode",`+${o.dialCode}`)},inputProps:{id:"contactNumber",name:"contactNumber",required:!0},containerStyle:W.container,inputStyle:W.inputStyle,buttonStyle:W.buttonStyle,dropdownStyle:W.dropdownStyle,enableSearch:!0,searchPlaceholder:"Search country..."})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Email"}),t.jsx("input",{id:"email",type:"email",value:s.email,onChange:e=>Z("email",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"customer@example.com"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Country"}),t.jsx("input",{id:"country",type:"text",value:s.country,onChange:e=>Z("country",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Enter country"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsxs("label",{htmlFor:"leadBy",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:["Lead By (Optional)",t.jsxs("span",{className:"ml-1 inline-block relative group",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400 dark:text-gray-400 cursor-help",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-48 bg-gray-800 text-white text-xs rounded py-1 px-2 hidden group-hover:block",children:"Name of the person who led this sale (can be different from the Lead Person assigned in the system)"})]})]}),t.jsx("input",{id:"leadBy",type:"text",value:s.leadBy,onChange:e=>Z("leadBy",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Who led this sale?"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Currency"}),t.jsx("select",{id:"currency",value:s.currency,onChange:e=>Z("currency",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:ne.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Product"}),t.jsx("input",{id:"product",type:"text",value:s.product,onChange:e=>Z("product",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Product or course name"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"loginId",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Login ID (Optional)"}),t.jsx("input",{id:"loginId",type:"text",value:s.loginId,onChange:e=>Z("loginId",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Customer login ID"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Password (Optional)"}),t.jsx("input",{id:"password",type:"text",value:s.password,onChange:e=>Z("password",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"Customer password"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{htmlFor:"leadPerson",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Lead Person"}),t.jsxs("select",{id:"leadPerson",value:s.leadPerson,onChange:e=>Z("leadPerson",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a lead person"}),H.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]}),te&&t.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-500",children:"Loading lead persons..."})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Amount"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"amount",type:"number",value:s.totalCost,onChange:e=>Z("totalCost",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Token"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"token",type:"number",value:s.tokenAmount,onChange:e=>Z("tokenAmount",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"pending",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Pending"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-500",children:Me(s.currency)}),t.jsx("input",{id:"pending",type:"number",value:s.pending,onChange:e=>Z("pending",e.target.value),className:"block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",placeholder:"0.00",disabled:s.status==="Completed"})]})]}),t.jsxs("div",{className:"col-span-2 md:col-span-1",children:[t.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-400",children:"Status"}),t.jsx("select",{id:"status",value:s.status,onChange:e=>Z("status",e.target.value),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:border-blue-400 focus:ring-offset-2 focus:border-blue-500",children:d.map(e=>t.jsx("option",{value:e,children:e},e))})]})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 shadow-sm dark:shadow-xl hover:shadow-md transition-all duration-200 text-white rounded-md",children:"Add Sale"})})]})]})})]}),"// Modal for editing sale",ee&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-4xl overflow-y-auto max-h-[90vh]",children:[t.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",children:"Edit Sale"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),t.jsx("input",{type:"date",value:N.saleDate?new Date(N.saleDate).toISOString().split("T")[0]:"",onChange:e=>xe("saleDate",new Date(e.target.value)),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lead By"}),t.jsx("input",{type:"text",value:N.leadBy||"",onChange:e=>xe("leadBy",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Login ID"}),t.jsx("input",{type:"text",value:N.loginId||"",onChange:e=>xe("loginId",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),t.jsx("input",{type:"text",value:N.password||"",onChange:e=>xe("password",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product"}),t.jsx("input",{type:"text",value:N.product||"",onChange:e=>xe("product",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sales Person"}),t.jsxs("select",{value:N.salesPerson||"",onChange:e=>xe("salesPerson",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2",children:[t.jsx("option",{value:"",children:"Select Sales Person"}),Q.salesPersons.map(e=>t.jsx("option",{value:e._id,children:e.fullName},e._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount"}),t.jsx("input",{type:"number",value:N.amount||0,onChange:e=>xe("amount",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token"}),t.jsx("input",{type:"number",value:N.token||0,onChange:e=>xe("token",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pending"}),t.jsx("input",{type:"number",value:N.pending||0,onChange:e=>xe("pending",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2",disabled:N.status==="Completed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),t.jsx("select",{value:N.status||"",onChange:e=>xe("status",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2",children:C(N.status).map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Remarks"}),t.jsx("textarea",{value:N.remarks||"",onChange:e=>xe("remarks",e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2",rows:"3"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx("button",{type:"button",onClick:()=>xt(ee),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Save"}),t.jsx("button",{type:"button",onClick:()=>{je(null),Ae({})},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"})]})]})})]})};export{dr as default};

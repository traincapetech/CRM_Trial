import{J as D,u as te,a as x,j as e,L as xe,K as C,M as j,b as me}from"./index-CR2cQI6u.js";function ue(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(a)}function K(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(a)}function Y(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(a)}function X(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(a)}function he(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(a)}function ge(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(a)}function be(a){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(a)}const Z=({status:a})=>{const f={New:"bg-blue-100",Contacted:"bg-yellow-100",Interested:"bg-green-100","Not Interested":"bg-red-100","Follow Up":"bg-purple-100",Qualified:"bg-indigo-100","Converted to Lead":"bg-emerald-100",Lost:"bg-gray-100 dark:bg-slate-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-black ${f[a]||"bg-gray-100 dark:bg-slate-700"}`,children:a})},ee=({priority:a})=>{const f={High:"bg-red-100",Medium:"bg-yellow-100",Low:"bg-green-100"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-black dark:text-black ${f[a]||"bg-gray-100 dark:bg-slate-700"}`,children:a})},pe=()=>{var q,V,H,$,Q,G,J;const{user:a,token:f}=te(),[s,S]=x.useState([]),[F,L]=x.useState(!0),[y,p]=x.useState(!1),[w,k]=x.useState(!1),[l,u]=x.useState(!1),[b,r]=x.useState(null),[i,m]=x.useState({}),[o,h]=x.useState({search:"",status:"",source:"",priority:"",page:1,limit:1e5}),[n,v]=x.useState({pages:0,total:0,currentPage:1}),[U,se]=x.useState(!0),[ae,B]=x.useState(new Date),[le,A]=x.useState(null),[W,M]=x.useState(""),re=()=>{if(U)try{const t=new(window.AudioContext||window.webkitAudioContext),d=t.createOscillator(),c=t.createGain();d.connect(c),c.connect(t.destination),d.frequency.setValueAtTime(800,t.currentTime),d.frequency.setValueAtTime(600,t.currentTime+.1),c.gain.setValueAtTime(.3,t.currentTime),c.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),d.start(t.currentTime),d.stop(t.currentTime+.2)}catch(t){console.log("Could not play notification sound:",t)}},z=()=>{if((a==null?void 0:a.role)==="Sales Person"&&s.length>0){const t=new Date,d=s.filter(c=>{if(!c.nextFollowUpDate)return!1;const P=new Date(c.nextFollowUpDate)-t,T=Math.ceil(P/(1e3*60*60*24));return T<=1&&T>=0});d.length>0&&(re(),j.success(`You have ${d.length} prospect(s) due for follow-up!`,{duration:5e3}))}},de=async(t,d)=>{try{(await C.update(t,{remark:d})).data.success&&(S(g=>g.map(P=>P._id===t?{...P,remark:d}:P)),j.success("Remark updated successfully"),A(null),M(""))}catch(c){console.error("Error updating remark:",c),j.error("Failed to update remark")}},ne=(t,d="")=>{A(t),M(d)},oe=()=>{A(null),M("")},ie=t=>{de(t,W)},I=async()=>{try{L(!0);const t=await C.getAll(o);t.data.success&&(S(t.data.data),v(t.data.pagination))}catch(t){console.error("Error fetching prospects:",t),j.error("Failed to fetch prospects")}finally{L(!1)}},E=async()=>{try{const t=await C.getStats();t.data.success&&m(t.data.data)}catch(t){console.error("Error fetching stats:",t)}};x.useEffect(()=>{I(),E()},[o]),x.useEffect(()=>{if(s.length>0){const t=new Date;t-ae>300*1e3&&(z(),B(t))}},[s]),x.useEffect(()=>{const t=setInterval(()=>{s.length>0&&(z(),B(new Date))},6e5);return()=>clearInterval(t)},[s]);const ce=t=>{h(d=>({...d,search:t.target.value,page:1}))},N=(t,d)=>{h(c=>({...c,[t]:d,page:1}))},O=async t=>{var d,c;if(window.confirm("Are you sure you want to delete this prospect?"))try{(await C.delete(t)).data.success&&(j.success("Prospect deleted successfully"),I(),E())}catch(g){console.error("Error deleting prospect:",g),j.error(((c=(d=g.response)==null?void 0:d.data)==null?void 0:c.message)||"Failed to delete prospect")}},_=async t=>{var d,c;if(window.confirm("Convert this prospect to a lead?"))try{(await C.convertToLead(t)).data.success&&(j.success("Prospect converted to lead successfully"),I(),E())}catch(g){console.error("Error converting prospect:",g),j.error(((c=(d=g.response)==null?void 0:d.data)==null?void 0:c.message)||"Failed to convert prospect")}};return e.jsx(xe,{children:e.jsxs("div",{className:"p-6 w-full min-h-screen",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Prospects"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-500",children:"Manage your potential customers"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(a==null?void 0:a.role)==="Sales Person"&&e.jsxs("button",{onClick:()=>se(!U),className:`px-3 py-2 rounded-lg flex items-center gap-2 text-sm transition-all duration-200 ${U?"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:["ðŸ”Š ",U?"Sound On":"Sound Off"]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 shadow-sm dark:shadow-xl hover:shadow-md transition-all duration-200 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(X,{})," Add Prospect"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((q=i.overview)==null?void 0:q.total)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Total"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:((V=i.overview)==null?void 0:V.new)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"New"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:((H=i.overview)==null?void 0:H.contacted)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Contacted"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:(($=i.overview)==null?void 0:$.interested)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Interested"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-500",children:((Q=i.overview)==null?void 0:Q.qualified)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Qualified"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:((G=i.overview)==null?void 0:G.converted)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Converted"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow shadow-sm dark:shadow-black/25",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:((J=i.overview)==null?void 0:J.lost)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-500",children:"Lost"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out p-4 rounded-lg shadow mb-6 shadow-sm dark:shadow-black/25",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-3 text-gray-400 dark:text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search prospects...",value:o.search,onChange:ce,className:"pl-10 pr-4 py-2 border rounded-lg w-full focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent"})]}),e.jsxs("select",{value:o.status,onChange:t=>N("status",t.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Contacted",children:"Contacted"}),e.jsx("option",{value:"Interested",children:"Interested"}),e.jsx("option",{value:"Not Interested",children:"Not Interested"}),e.jsx("option",{value:"Follow Up",children:"Follow Up"}),e.jsx("option",{value:"Qualified",children:"Qualified"}),e.jsx("option",{value:"Converted to Lead",children:"Converted to Lead"}),e.jsx("option",{value:"Lost",children:"Lost"})]}),e.jsxs("select",{value:o.source,onChange:t=>N("source",t.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Cold Call",children:"Cold Call"}),e.jsx("option",{value:"Email Campaign",children:"Email Campaign"}),e.jsx("option",{value:"Social Media",children:"Social Media"}),e.jsx("option",{value:"Event",children:"Event"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsxs("select",{value:o.priority,onChange:t=>N("priority",t.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out rounded-lg shadow overflow-hidden shadow-sm dark:shadow-black/25",children:F?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-500",children:"Loading prospects..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(be,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-slate-900 dark:text-slate-100",children:"No prospects"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-gray-400",children:"Get started by creating a new prospect."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 shadow-sm dark:shadow-xl hover:shadow-md transition-all duration-200 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto",children:[e.jsx(X,{})," Add Prospect"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 transition-all duration-200 ease-out",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Contact Info"}),(a==null?void 0:a.role)==="Sales Person"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Contact Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Next Follow-up Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Lead By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Remark"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Assigned To"})]}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out divide-y divide-slate-200 dark:divide-slate-700",children:s.map((t,d)=>{var c;return e.jsxs("tr",{className:d%2===0?"bg-white dark:bg-slate-800":"bg-slate-50 dark:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-3 text-center",children:d+1}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:t.name||"No Name"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600 dark:text-gray-400 space-y-0.5",children:[t.phone&&e.jsx("div",{className:"truncate",children:t.phone}),t.email&&e.jsx("div",{className:"truncate",children:t.email})]})]})}),(a==null?void 0:a.role)==="Sales Person"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:t.lastContactDate?new Date(t.lastContactDate).toLocaleDateString():"No contact yet"})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx("div",{className:`text-sm ${t.nextFollowUpDate?(()=>{const T=new Date(t.nextFollowUpDate)-new Date,R=Math.ceil(T/(1e3*60*60*24));return R<0?"text-red-600 dark:text-red-400 font-semibold":R===0?"text-orange-600 dark:text-orange-400 font-semibold":R<=2?"text-yellow-600 dark:text-yellow-400 font-semibold":"text-slate-900 dark:text-slate-100"})():"text-slate-900 dark:text-slate-100"}`,children:t.nextFollowUpDate?new Date(t.nextFollowUpDate).toLocaleDateString():"Not scheduled"})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:t.leadBy||"Not specified"})}),e.jsx("td",{className:"px-4 py-3 text-left",children:le===t._id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:W,onChange:g=>M(g.target.value),className:"w-full px-2 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Add remark...",autoFocus:!0}),e.jsx("button",{onClick:()=>ie(t._id),className:"px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600",children:"Save"}),e.jsx("button",{onClick:oe,className:"px-2 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-xs truncate",children:t.remark||"No remark"}),e.jsx("button",{onClick:()=>ne(t._id,t.remark),className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:t.remark?"Edit":"Add"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 truncate",children:t.company||"-"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-400 truncate",children:t.designation||"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:t.source})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx(Z,{status:t.status})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx(ee,{priority:t.priority})}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-xs truncate",children:((c=t.assignedTo)==null?void 0:c.fullName)||"Unassigned"})})]}),e.jsx("td",{className:"px-4 py-3 text-left",children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-left",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{r(t),u(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{r(t),k(!0)},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Edit",children:e.jsx(K,{className:"w-4 h-4"})}),t.status!=="Converted to Lead"&&e.jsx("button",{onClick:()=>_(t._id),className:"text-purple-600 hover:text-purple-900 p-1 rounded hover:bg-purple-50",title:"Convert to Lead",children:e.jsx(ue,{className:"w-4 h-4"})}),["Admin","Manager"].includes(a==null?void 0:a.role)&&e.jsx("button",{onClick:()=>O(t._id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete",children:e.jsx(ge,{className:"w-4 h-4"})})]})})]},t._id)})})]})}),e.jsx("div",{className:"lg:hidden",children:s.map(t=>{var d;return e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t.name||"No Name"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:t.company||"No Company"})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{r(t),u(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded hover:bg-blue-50",title:"View Details",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{r(t),k(!0)},className:"text-green-600 hover:text-green-900 p-2 rounded hover:bg-green-50",title:"Edit",children:e.jsx(K,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Status:"}),e.jsx("div",{className:"mt-1",children:e.jsx(Z,{status:t.status})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Priority:"}),e.jsx("div",{className:"mt-1",children:e.jsx(ee,{priority:t.priority})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Source:"}),e.jsx("div",{className:"mt-1 text-slate-900 dark:text-slate-100",children:t.source})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 dark:text-gray-400",children:"Assigned:"}),e.jsx("div",{className:"mt-1 text-slate-900 dark:text-slate-100 truncate",children:((d=t.assignedTo)==null?void 0:d.fullName)||"Unassigned"})]})]}),(t.email||t.phone)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[t.email&&e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-500 mb-1 truncate",children:t.email}),t.phone&&e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-500 truncate",children:t.phone})]})]},t._id)})}),n&&n.pages>1&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out px-4 py-3 flex items-center justify-between border-t border-slate-200 dark:border-slate-700 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>N("page",Math.max(1,o.page-1)),disabled:o.page===1,className:"relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 transition-all duration-200 ease-out hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>N("page",Math.min((n==null?void 0:n.pages)||1,o.page+1)),disabled:o.page===((n==null?void 0:n.pages)||1),className:"ml-3 relative inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 transition-all duration-200 ease-out hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(o.page-1)*o.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.page*o.limit,(n==null?void 0:n.total)||0)})," ","of"," ",e.jsx("span",{className:"font-medium",children:(n==null?void 0:n.total)||0})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm dark:shadow-black/25 -space-x-px",children:[e.jsxs("button",{onClick:()=>N("page",Math.max(1,o.page-1)),disabled:o.page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:(n==null?void 0:n.pages)||0},(t,d)=>d+1).map(t=>e.jsx("button",{onClick:()=>N("page",t),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t===o.page?"z-10 bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-600 dark:text-blue-400":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600 text-gray-500 dark:text-gray-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:t},t)),e.jsxs("button",{onClick:()=>N("page",Math.min((n==null?void 0:n.pages)||1,o.page+1)),disabled:o.page===((n==null?void 0:n.pages)||1),className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]})}),(y||w)&&e.jsx(fe,{isOpen:y||w,onClose:()=>{p(!1),k(!1),r(null)},prospect:b,onSuccess:()=>{I(),E(),p(!1),k(!1),r(null)}}),l&&b&&e.jsx(ke,{isOpen:l,onClose:()=>{u(!1),r(null)},prospect:b,onEdit:()=>{u(!1),k(!0)},onConvert:()=>{u(!1),_(b._id)},onDelete:()=>{u(!1),O(b._id)},userRole:a==null?void 0:a.role})]})})},fe=({isOpen:a,onClose:f,prospect:s,onSuccess:S})=>{const{user:F,token:L}=te(),[y,p]=x.useState(!1),[w,k]=x.useState([]),[l,u]=x.useState({name:"",email:"",phone:"",company:"",designation:"",source:"Other",sourceDetails:"",industry:"",companySize:"Unknown",budget:"",budgetCurrency:"USD",serviceInterest:"",requirements:"",timeline:"Not specified",status:"New",priority:"Medium",assignedTo:"",leadBy:"",lastContactDate:"",nextFollowUpDate:"",contactMethod:"",notes:"",tags:"",linkedinProfile:"",websiteUrl:""});x.useEffect(()=>{var i,m;s&&u({name:s.name||"",email:s.email||"",phone:s.phone||"",company:s.company||"",designation:s.designation||"",source:s.source||"Other",sourceDetails:s.sourceDetails||"",industry:s.industry||"",companySize:s.companySize||"Unknown",budget:s.budget||"",budgetCurrency:s.budgetCurrency||"USD",serviceInterest:s.serviceInterest||"",requirements:s.requirements||"",timeline:s.timeline||"Not specified",status:s.status||"New",priority:s.priority||"Medium",assignedTo:((i=s.assignedTo)==null?void 0:i._id)||"",leadBy:s.leadBy||"",lastContactDate:s.lastContactDate?s.lastContactDate.split("T")[0]:"",nextFollowUpDate:s.nextFollowUpDate?s.nextFollowUpDate.split("T")[0]:"",contactMethod:s.contactMethod||"",notes:s.notes||"",tags:((m=s.tags)==null?void 0:m.join(", "))||"",linkedinProfile:s.linkedinProfile||"",websiteUrl:s.websiteUrl||""})},[s]),x.useEffect(()=>{(async()=>{try{const m=await me.getUsers();m.data.success&&k(m.data.data)}catch(m){console.error("Error fetching users:",m)}})()},[L]);const b=async i=>{var m,o;i.preventDefault(),p(!0);try{const h={...l,budget:l.budget?parseFloat(l.budget):void 0,tags:l.tags?l.tags.split(",").map(v=>v.trim()).filter(Boolean):[],lastContactDate:l.lastContactDate||void 0,nextFollowUpDate:l.nextFollowUpDate||void 0};Object.keys(h).forEach(v=>{h[v]===""&&delete h[v]}),(s?await C.update(s._id,h):await C.create(h)).data.success&&(j.success(s?"Prospect updated successfully":"Prospect created successfully"),S())}catch(h){console.error("Error saving prospect:",h),j.error(((o=(m=h.response)==null?void 0:m.data)==null?void 0:o.message)||"Failed to save prospect")}finally{p(!1)}},r=i=>{const{name:m,value:o}=i.target;u(h=>{const n={...h,[m]:o};if(m==="assignedTo"&&o){const v=w.find(U=>U._id===o);v&&(n.leadBy=v.fullName)}else m==="assignedTo"&&!o&&(n.leadBy="");return n})};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-sm dark:shadow-black/25",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:s?"Edit Prospect":"Add New Prospect"}),e.jsx("button",{onClick:f,className:"text-gray-400 dark:text-gray-300 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Contact person name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Company"}),e.jsx("input",{type:"text",name:"company",value:l.company,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Designation"}),e.jsx("input",{type:"text",name:"designation",value:l.designation,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Job title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Industry"}),e.jsx("input",{type:"text",name:"industry",value:l.industry,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Technology, Healthcare, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Source & Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Source"}),e.jsxs("select",{name:"source",value:l.source,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Cold Call",children:"Cold Call"}),e.jsx("option",{value:"Email Campaign",children:"Email Campaign"}),e.jsx("option",{value:"Social Media",children:"Social Media"}),e.jsx("option",{value:"Event",children:"Event"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Source Details"}),e.jsx("input",{type:"text",name:"sourceDetails",value:l.sourceDetails,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Additional source information"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Company Size"}),e.jsxs("select",{name:"companySize",value:l.companySize,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"1-10",children:"1-10"}),e.jsx("option",{value:"11-50",children:"11-50"}),e.jsx("option",{value:"51-200",children:"51-200"}),e.jsx("option",{value:"201-500",children:"201-500"}),e.jsx("option",{value:"501-1000",children:"501-1000"}),e.jsx("option",{value:"1000+",children:"1000+"}),e.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Budget"}),e.jsxs("div",{className:"flex",children:[e.jsxs("select",{name:"budgetCurrency",value:l.budgetCurrency,onChange:r,className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-l-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"INR",children:"INR"})]}),e.jsx("input",{type:"number",name:"budget",value:l.budget,onChange:r,className:"flex-1 px-3 py-2 border border-l-0 border-slate-300 dark:border-slate-600 rounded-r-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"0",min:"0"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Interest & Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Service Interest"}),e.jsx("input",{type:"text",name:"serviceInterest",value:l.serviceInterest,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"What services are they interested in?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Timeline"}),e.jsxs("select",{name:"timeline",value:l.timeline,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"Immediate",children:"Immediate"}),e.jsx("option",{value:"Within 1 month",children:"Within 1 month"}),e.jsx("option",{value:"1-3 months",children:"1-3 months"}),e.jsx("option",{value:"3-6 months",children:"3-6 months"}),e.jsx("option",{value:"6+ months",children:"6+ months"}),e.jsx("option",{value:"Not specified",children:"Not specified"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Requirements"}),e.jsx("textarea",{name:"requirements",value:l.requirements,onChange:r,rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Detailed requirements and needs"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Status & Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:l.status,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Contacted",children:"Contacted"}),e.jsx("option",{value:"Interested",children:"Interested"}),e.jsx("option",{value:"Not Interested",children:"Not Interested"}),e.jsx("option",{value:"Follow Up",children:"Follow Up"}),e.jsx("option",{value:"Qualified",children:"Qualified"}),e.jsx("option",{value:"Lost",children:"Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:l.priority,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Lead Person ",e.jsx("span",{className:"text-gray-500 text-sm",children:"(Optional)"})]}),e.jsxs("select",{name:"assignedTo",value:l.assignedTo,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Lead Person (Optional)"}),w.filter(i=>i.role==="Lead Person").map(i=>e.jsx("option",{value:i._id,children:i.fullName},i._id))]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Follow-up Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Last Contact Date"}),e.jsx("input",{type:"date",name:"lastContactDate",value:l.lastContactDate,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Next Follow-up Date"}),e.jsx("input",{type:"date",name:"nextFollowUpDate",value:l.nextFollowUpDate,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contact Method"}),e.jsxs("select",{name:"contactMethod",value:l.contactMethod,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select method"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"WhatsApp",children:"WhatsApp"}),e.jsx("option",{value:"Meeting",children:"Meeting"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"LinkedIn Profile"}),e.jsx("input",{type:"url",name:"linkedinProfile",value:l.linkedinProfile,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Website URL"}),e.jsx("input",{type:"url",name:"websiteUrl",value:l.websiteUrl,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"https://company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tags"}),e.jsx("input",{type:"text",name:"tags",value:l.tags,onChange:r,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"tag1, tag2, tag3"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Notes"}),e.jsx("textarea",{name:"notes",value:l.notes,onChange:r,rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:focus:ring-offset-slate-900 focus:ring-offset-2 focus:border-transparent",placeholder:"Additional notes and observations"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-slate-700 dark:text-slate-300 bg-gray-100 dark:bg-slate-600 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 shadow-sm dark:shadow-xl hover:shadow-md transition-all duration-200 text-white rounded-lg disabled:opacity-50 flex items-center gap-2",children:[y&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s?"Update Prospect":"Create Prospect"]})]})]})]})})}):null},ke=({isOpen:a,onClose:f,prospect:s,onEdit:S,onConvert:F,onDelete:L,userRole:y})=>{var k,l;const p=({status:u})=>{const b={New:"bg-blue-100",Contacted:"bg-yellow-100",Interested:"bg-green-100","Not Interested":"bg-red-100","Follow Up":"bg-purple-100",Qualified:"bg-indigo-100","Converted to Lead":"bg-emerald-100",Lost:"bg-gray-100 dark:bg-slate-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-black ${b[u]||"bg-gray-100 dark:bg-slate-700"}`,children:u})},w=({priority:u})=>{const b={High:"bg-red-100",Medium:"bg-yellow-100",Low:"bg-green-100"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-black ${b[u]||"bg-gray-100 dark:bg-slate-700"}`,children:u})};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 transition-all duration-200 ease-out rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-sm dark:shadow-black/25",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"View Prospect Details"}),e.jsx("button",{onClick:f,className:"text-gray-400 dark:text-gray-300 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Prospect Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.name||"No Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.email||"No Email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.phone||"No Phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Company"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.company||"No Company"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Designation"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.designation||"No Designation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Industry"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.industry||"No Industry"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Source"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.source||"No Source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:e.jsx(p,{status:s.status})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:e.jsx(w,{priority:s.priority})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assigned To"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:((k=s.assignedTo)==null?void 0:k.fullName)||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Created"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:new Date(s.createdAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Source Details"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.sourceDetails||"No source details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Company Size"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.companySize||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Budget"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.budget?`${s.budget} ${s.budgetCurrency}`:"No budget"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Service Interest"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.serviceInterest||"No service interest"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Timeline"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.timeline||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Requirements"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.requirements||"No requirements"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Last Contact Date"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.lastContactDate?new Date(s.lastContactDate).toLocaleDateString():"No last contact date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Next Follow-up Date"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.nextFollowUpDate?new Date(s.nextFollowUpDate).toLocaleDateString():"No next follow-up date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contact Method"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.contactMethod||"No contact method"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"LinkedIn Profile"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.linkedinProfile||"No LinkedIn profile"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Website URL"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.websiteUrl||"No website URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tags"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:((l=s.tags)==null?void 0:l.join(", "))||"No tags"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Notes"}),e.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.notes||"No notes"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-slate-700 dark:text-slate-300 bg-gray-100 dark:bg-slate-600 rounded-lg hover:bg-gray-200",children:"Close"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 shadow-sm dark:shadow-xl hover:shadow-md transition-all duration-200 text-white rounded-lg",children:"Edit"}),s.status!=="Converted to Lead"&&e.jsx("button",{onClick:F,className:"px-4 py-2 bg-purple-600 text-white dark rounded-lg hover:bg-purple-700",children:"Convert to Lead"}),["Admin","Manager"].includes(y)&&e.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})]})})}):null};export{pe as default};

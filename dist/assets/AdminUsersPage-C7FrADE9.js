import{u as Ce,a as i,b as E,k as M,j as e,L as Ae,m as De,n as Ee,E as Me}from"./index-CR2cQI6u.js";const Pe=()=>{const{user:te}=Ce(),[w,G]=i.useState("users"),[p,se]=i.useState([]),[L,le]=i.useState([]),[T,de]=i.useState([]),[B,ne]=i.useState([]),[j,y]=i.useState(!0),[I,c]=i.useState(null),[O,J]=i.useState(""),[_,X]=i.useState(""),[oe,U]=i.useState(!1),[ie,v]=i.useState(!1),[Y,$]=i.useState(!1),[H,P]=i.useState(null),[s,z]=i.useState(null),[Z,K]=i.useState(null),[ce,F]=i.useState(!1),[x,V]=i.useState(null),[S,C]=i.useState(""),[A,Q]=i.useState(!0),[k,W]=i.useState({photograph:null,tenthMarksheet:null,twelfthMarksheet:null,bachelorDegree:null,postgraduateDegree:null,aadharCard:null,panCard:null,pcc:null,resume:null,offerLetter:null}),[l,ee]=i.useState({fullName:"",email:"",password:"",role:"Sales Person",phoneNumber:"",whatsappNumber:"",linkedInUrl:"",currentAddress:"",permanentAddress:"",dateOfBirth:"",joiningDate:"",salary:"",department:"",employeeRole:"",status:"ACTIVE",collegeName:"",internshipDuration:""}),[q,re]=i.useState({photograph:null,tenthMarksheet:null,twelfthMarksheet:null,bachelorDegree:null,postgraduateDegree:null,aadharCard:null,panCard:null,pcc:null,resume:null,offerLetter:null}),[Ie,ue]=i.useState({});i.useEffect(()=>{D(),N(),me()},[]);const D=async()=>{try{y(!0);const r=await E.getUsers();r.data.success?se(r.data.data):c("Failed to load users")}catch(r){console.error("Error fetching users:",r),c("Failed to load users. Please try again.")}finally{y(!1)}},N=async()=>{try{const r=await M.getAll();r.data.success&&le(r.data.data)}catch(r){console.error("Error fetching employees:",r)}},me=async()=>{try{const[r,d]=await Promise.all([M.getDepartments(),M.getRoles()]);r.data.success&&de(r.data.data),d.data.success&&ne(d.data.data)}catch(r){console.error("Error fetching departments and roles:",r)}},m=r=>{ee({...l,[r.target.name]:r.target.value})},g=r=>{const{name:d,value:o}=r.target;z(a=>({...a,[d]:o}))},ge=async r=>{var d,o;r.preventDefault();try{y(!0),c(null);const a=new FormData;a.append("fullName",l.fullName),a.append("email",l.email),a.append("password",l.password),a.append("role",l.role),a.append("phoneNumber",l.phoneNumber||""),a.append("whatsappNumber",l.whatsappNumber||""),a.append("linkedInUrl",l.linkedInUrl||""),a.append("currentAddress",l.currentAddress||""),a.append("permanentAddress",l.permanentAddress||""),a.append("dateOfBirth",l.dateOfBirth||""),a.append("joiningDate",l.joiningDate||""),a.append("salary",l.salary||""),a.append("department",l.department||""),a.append("employeeRole",l.employeeRole||""),a.append("status",l.status||"ACTIVE"),a.append("collegeName",l.collegeName||""),a.append("internshipDuration",l.internshipDuration||""),Object.keys(q).forEach(n=>{q[n]&&a.append(n,q[n])}),console.log("AdminUsersPage - Form data being sent:",{formDataEntries:Array.from(a.entries()).map(([n,t])=>({key:n,type:typeof t,isFile:t instanceof File,size:t instanceof File?t.size:null,value:t instanceof File?t.name:t}))});const u=await E.createUserWithDocuments(a);u.data.success?(D(),N(),U(!1),xe(),alert(`User created successfully!
Employee ID: ${u.data.employeeId||"Generated"}
Please save this information.`)):c(u.data.message||"Failed to create user")}catch(a){console.error("Error creating user:",a),c(((o=(d=a.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to create user. Please try again.")}finally{y(!1)}},xe=()=>{ee({fullName:"",email:"",password:"",role:"Sales Person",phoneNumber:"",whatsappNumber:"",linkedInUrl:"",currentAddress:"",permanentAddress:"",dateOfBirth:"",joiningDate:"",salary:"",department:"",employeeRole:"",status:"ACTIVE",collegeName:"",internshipDuration:""}),re({photograph:null,tenthMarksheet:null,twelfthMarksheet:null,bachelorDegree:null,postgraduateDegree:null,aadharCard:null,panCard:null,pcc:null,resume:null,offerLetter:null}),W({photograph:null,tenthMarksheet:null,twelfthMarksheet:null,bachelorDegree:null,postgraduateDegree:null,aadharCard:null,panCard:null,pcc:null,resume:null,offerLetter:null}),ue({})},h=(r,d)=>{re(o=>({...o,[r]:d}))},be=(r,d)=>{W(o=>({...o,[r]:d}))},he=async r=>{var d,o,a,u,n;r.preventDefault();try{if(s.password&&s.password.length>0&&s.password.length<6){c("Password must be at least 6 characters");return}y(!0);const t=new FormData;t.append("fullName",s.fullName),t.append("email",s.email),t.append("role",s.role),s.password&&t.append("password",s.password),t.append("phoneNumber",s.phoneNumber||""),t.append("whatsappNumber",s.whatsappNumber||""),t.append("linkedInUrl",s.linkedInUrl||""),t.append("currentAddress",s.currentAddress||""),t.append("permanentAddress",s.permanentAddress||""),t.append("dateOfBirth",s.dateOfBirth||""),t.append("joiningDate",s.joiningDate||""),t.append("salary",s.salary||""),t.append("department",s.department||""),t.append("employeeRole",s.employeeRole||""),t.append("status",s.status||"ACTIVE"),t.append("collegeName",s.collegeName||""),t.append("internshipDuration",s.internshipDuration||""),Object.keys(k).forEach(f=>{k[f]&&(t.append(f,k[f]),console.log(`Adding document ${f}:`,k[f].name))}),console.log("Updating user with ID:",s._id),console.log("FormData contents:");for(let[f,R]of t.entries())R instanceof File?console.log(`${f}: File - ${R.name} (${R.size} bytes)`):console.log(`${f}: ${R}`);const b=await E.updateUserWithDocuments(s._id,t);console.log("Response received:",b),console.log("Response data:",b.data),console.log("Response data.data:",b.data.data),b.data&&b.data.success?(v(!1),D(),N(),setTimeout(()=>{N()},1e3),c(null),W({photograph:null,tenthMarksheet:null,twelfthMarksheet:null,bachelorDegree:null,postgraduateDegree:null,aadharCard:null,panCard:null,pcc:null,resume:null,offerLetter:null}),alert("User updated successfully!")):c(b.data&&b.data.message||"Failed to update user")}catch(t){console.error("Error updating user:",t),console.error("Error response:",t.response),console.error("Error response data:",(d=t.response)==null?void 0:d.data),console.error("Error response status:",(o=t.response)==null?void 0:o.status),console.error("Error response statusText:",(a=t.response)==null?void 0:a.statusText),c(((n=(u=t.response)==null?void 0:u.data)==null?void 0:n.message)||"Failed to update user. Please check your connection and try again.")}finally{y(!1)}},pe=async r=>{var d,o;try{y(!0);const a=await E.deleteUser(r);a.data&&a.data.success?(D(),P(null),c(null)):c(a.data&&a.data.message||"Failed to delete user")}catch(a){console.error("Error deleting user:",a),c(((o=(d=a.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to delete user. Please check your connection and try again."),P(null)}finally{y(!1)}},ye=async r=>{var d,o;try{let a={};if(["Sales Person","Lead Person","Manager","Employee"].includes(r.role)){const u=await M.getAll();if(u.data&&u.data.success){const n=u.data.data.find(t=>t.userId===r._id);n&&(a={phoneNumber:n.phoneNumber||"",whatsappNumber:n.whatsappNumber||"",linkedInUrl:n.linkedInUrl||"",currentAddress:n.currentAddress||"",permanentAddress:n.permanentAddress||"",dateOfBirth:n.dateOfBirth?(()=>{const t=new Date(n.dateOfBirth);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]})():"",joiningDate:n.joiningDate?(()=>{const t=new Date(n.joiningDate);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]})():"",salary:n.salary||"",department:((d=n.department)==null?void 0:d._id)||"",employeeRole:((o=n.role)==null?void 0:o._id)||"",status:n.status||"ACTIVE",collegeName:n.collegeName||"",internshipDuration:n.internshipDuration||""})}}z({_id:r._id,fullName:r.fullName,email:r.email,role:r.role,password:"",phoneNumber:a.phoneNumber||"",whatsappNumber:a.whatsappNumber||"",linkedInUrl:a.linkedInUrl||"",currentAddress:a.currentAddress||"",permanentAddress:a.permanentAddress||"",dateOfBirth:a.dateOfBirth||"",joiningDate:a.joiningDate||"",salary:a.salary||"",department:a.department||"",employeeRole:a.employeeRole||"",status:a.status||"ACTIVE",collegeName:a.collegeName||"",internshipDuration:a.internshipDuration||""}),v(!0)}catch(a){console.error("Error loading employee data:",a),z({_id:r._id,fullName:r.fullName,email:r.email,role:r.role,password:"",phoneNumber:"",whatsappNumber:"",linkedInUrl:"",currentAddress:"",permanentAddress:"",dateOfBirth:"",joiningDate:"",salary:"",department:"",employeeRole:"",status:"ACTIVE",collegeName:"",internshipDuration:""}),v(!0)}},fe=r=>{console.log("handleEditEmployee called with employeeId:",r),K(r),$(!0)},ke=()=>{N(),$(!1),K(null)},je=r=>{if(p.find(o=>o.email===r.email)){c(`User account already exists for ${r.email}`);return}if(r.userId){c(`This employee already has a user account linked (ID: ${r.userId})`);return}V(r),C(""),Q(!0),F(!0)},Ne=async()=>{var r,d,o;if(x)try{if(p.find(b=>b.email===x.email)){c(`User account already exists for ${x.email}`),F(!1);return}let u;if(A)u=we();else{if(!S||S.length<6){c("Password must be at least 6 characters long");return}u=S}const n={fullName:x.fullName,email:x.email,password:u,role:((r=x.role)==null?void 0:r.name)||"Employee"},t=await E.createUser(n);if(t.data.success){await M.update(x._id,{employee:JSON.stringify({userId:t.data.data._id})}),D(),N(),F(!1),V(null),C("");const b=A?`Generated Password: ${u}
Please share this with the employee securely.`:"Account created with the provided password.";alert(`User account created successfully for ${x.fullName}
${b}`)}}catch(a){console.error("Error creating user account:",a),c(((o=(d=a.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to create user account. Please try again.")}},we=()=>Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),ve=Ee,ae=p.filter(r=>{const d=r.fullName.toLowerCase().includes(O.toLowerCase())||r.email.toLowerCase().includes(O.toLowerCase()),o=_===""||r.role===_;return d&&o});return e.jsxs(Ae,{children:[e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manage Users"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(De,{to:"/employees",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8zM8 14v.01M12 14v.01M16 14v.01"})}),"Employee Management"]}),w==="users"&&e.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Add New User"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-md mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>G("users"),className:`${w==="users"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.239"})}),"User Accounts"]}),e.jsxs("button",{onClick:()=>G("employees"),className:`${w==="employees"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Employees (",L.length,")"]})]})})}),I&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:I}),w==="users"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.239"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:p.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sales Team"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:p.filter(r=>r.role==="Sales Person").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-100 dark:bg-purple-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Managers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:p.filter(r=>r.role==="Manager").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8zM8 14v.01M12 14v.01M16 14v.01"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HR & Employees"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:p.filter(r=>r.role==="HR"||r.role==="Employee").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-5 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4",children:[e.jsxs("div",{className:"w-full lg:w-1/3",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Users"}),e.jsx("input",{type:"text",id:"search",placeholder:"Search by name or email",value:O,onChange:r=>J(r.target.value),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"w-full lg:w-1/3",children:[e.jsx("label",{htmlFor:"roleFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Role"}),e.jsxs("select",{id:"roleFilter",value:_,onChange:r=>X(r.target.value),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"Sales Person",children:"Sales Person"}),e.jsx("option",{value:"Lead Person",children:"Lead Person"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Employee",children:"Employee"}),e.jsx("option",{value:"IT Manager",children:"IT Manager"}),e.jsx("option",{value:"IT Intern",children:"IT Intern"}),e.jsx("option",{value:"IT Permanent",children:"IT Permanent"})]})]}),e.jsx("div",{className:"w-full lg:w-auto flex items-end pt-1",children:e.jsx("button",{onClick:()=>{J(""),X("")},className:"w-full lg:w-auto px-4 py-2 rounded-md bg-green-400 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-sm text-gray-800 dark:text-gray-100 border border-gray-300 dark:border-slate-600 transition-all",children:"Clear Filters"})})]})}),j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsx("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-md dark:shadow-black/25 overflow-hidden",children:ae.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-500",children:"No users found. Try adjusting your filters."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsx("tr",{children:["Avatar","Name","Email","Role","Created","Actions"].map(r=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:r},r))})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700",children:ae.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800 transition duration-150 text-center",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-10 w-10 mx-auto bg-gray-200 dark:bg-slate-600 rounded-full flex items-center justify-center text-gray-700 dark:text-gray-300 font-semibold",children:r.fullName.charAt(0).toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.fullName}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 break-all",children:["ID: ",r._id]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:r.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${r.role==="Admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":r.role==="Manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":r.role==="Lead Person"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":r.role==="HR"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":r.role==="Employee"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.role})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:ve(r.createdAt)}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:r._id!==te.id?e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>ye(r),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.jsx("button",{onClick:()=>P(r),className:"text-red-600 hover:text-red-900",children:"Delete"})]}):e.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"Current User"})})]},r._id))})]})})})]}),w==="employees"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-md dark:shadow-black/25 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Registered Employees"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage employee details and create user accounts for CRM access"})]}),j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No employees found"}),e.jsx("p",{className:"text-sm",children:"No employees are registered in the system yet."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsx("tr",{children:["Avatar","Employee","Contact","Department","Role","Status","User Account","Actions"].map(r=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:r},r))})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700",children:L.map(r=>{var o,a,u,n;const d=p.some(t=>t.email===r.email)||!!r.userId;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800 transition duration-150 text-center",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-10 w-10 mx-auto bg-gray-200 dark:bg-slate-600 rounded-full flex items-center justify-center text-gray-700 dark:text-gray-300 font-semibold",children:((a=(o=r.fullName)==null?void 0:o.charAt(0))==null?void 0:a.toUpperCase())||"E"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.fullName||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 break-all",children:["ID: ",r.employeeId||r._id]})]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{children:r.email||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.phoneNumber||"N/A"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:((u=r.department)==null?void 0:u.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:((n=r.role)==null?void 0:n.name)||"N/A"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${r.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":r.status==="Inactive"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:r.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4",children:d?e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Active"}):e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"None"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>fe(r._id),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),!d&&r.email&&!r.userId&&e.jsx("button",{onClick:()=>je(r),className:"text-green-600 hover:text-green-900",children:"Create Account"})]})})]},r._id)})})]})})]})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-lg dark:shadow-black/25 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-600 text-white px-6 py-4 rounded-t-lg",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Create User Account & Employee Profile"}),e.jsx("button",{onClick:()=>U(!1),className:"text-white hover:text-gray-200 focus:outline-none",children:"×"})]}),e.jsxs("form",{onSubmit:ge,className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:l.fullName,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Email *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Password *"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0,minLength:6}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"System Role *"}),e.jsxs("select",{id:"role",name:"role",value:l.role,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"Sales Person",children:"Sales Person"}),e.jsx("option",{value:"Lead Person",children:"Lead Person"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Employee",children:"Employee"}),e.jsx("option",{value:"IT Manager",children:"IT Manager"}),e.jsx("option",{value:"IT Intern",children:"IT Intern"}),e.jsx("option",{value:"IT Permanent",children:"IT Permanent"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:l.phoneNumber,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"whatsappNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"WhatsApp Number"}),e.jsx("input",{type:"tel",id:"whatsappNumber",name:"whatsappNumber",value:l.whatsappNumber,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"linkedInUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"LinkedIn URL"}),e.jsx("input",{type:"url",id:"linkedInUrl",name:"linkedInUrl",value:l.linkedInUrl,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"https://linkedin.com/in/..."})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Current Address"}),e.jsx("textarea",{id:"currentAddress",name:"currentAddress",value:l.currentAddress,onChange:m,rows:"3",className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"permanentAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Permanent Address"}),e.jsx("textarea",{id:"permanentAddress",name:"permanentAddress",value:l.permanentAddress,onChange:m,rows:"3",className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:l.dateOfBirth,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"joiningDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Joining Date"}),e.jsx("input",{type:"date",id:"joiningDate",name:"joiningDate",value:l.joiningDate,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Salary (₹)"}),e.jsx("input",{type:"number",id:"salary",name:"salary",value:l.salary,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Enter salary amount"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Department"}),e.jsxs("select",{id:"department",name:"department",value:l.department,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Department"}),T.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employeeRole",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Employee Role"}),e.jsxs("select",{id:"employeeRole",name:"employeeRole",value:l.employeeRole,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Role"}),B.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:l.status,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"TERMINATED",children:"Terminated"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Educational Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"collegeName",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"College Name"}),e.jsx("input",{type:"text",id:"collegeName",name:"collegeName",value:l.collegeName,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"internshipDuration",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Internship Duration (months)"}),e.jsx("input",{type:"number",id:"internshipDuration",name:"internshipDuration",value:l.internshipDuration,onChange:m,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Enter duration in months"})]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Document Uploads (Optional)"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:"You can upload documents now or add them later. All documents are optional."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Photograph"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>h("photograph",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"10th Marksheet"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("tenthMarksheet",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"12th Marksheet"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("twelfthMarksheet",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Bachelor Degree"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("bachelorDegree",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Postgraduate Degree"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("postgraduateDegree",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Aadhar Card"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("aadharCard",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"PAN Card"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("panCard",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Police Clearance Certificate"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>h("pcc",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Resume"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:r=>h("resume",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Offer Letter"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:r=>h("offerLetter",r.target.files[0]),className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-l file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"All documents are optional. Accepted formats: PDF, JPG, JPEG, PNG (for images), DOC, DOCX (for documents)"})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-400 rounded-md hover:bg-gray-50 dark:bg-slate-800 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",disabled:j,children:j?"Creating...":"Create User & Employee"})]})]})]})}),ie&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-lg dark:shadow-black/25 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-600 text-white px-6 py-4 rounded-t-lg",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Edit User Account & Employee Profile"}),e.jsx("button",{onClick:()=>v(!1),className:"text-white hover:text-gray-200 focus:outline-none",children:"×"})]}),e.jsxs("form",{onSubmit:he,className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editFullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",id:"editFullName",name:"fullName",value:s.fullName,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editEmail",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Email *"}),e.jsx("input",{type:"email",id:"editEmail",name:"email",value:s.email,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Password"}),e.jsx("input",{type:"password",id:"editPassword",name:"password",value:s.password,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Leave blank to keep current password",minLength:s.password?6:0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Leave blank to keep current password. New password must be at least 6 characters."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editRole",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"System Role *"}),e.jsxs("select",{id:"editRole",name:"role",value:s.role,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"Sales Person",children:"Sales Person"}),e.jsx("option",{value:"Lead Person",children:"Lead Person"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Employee",children:"Employee"}),e.jsx("option",{value:"IT Manager",children:"IT Manager"}),e.jsx("option",{value:"IT Intern",children:"IT Intern"}),e.jsx("option",{value:"IT Permanent",children:"IT Permanent"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editPhoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"editPhoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editWhatsappNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"WhatsApp Number"}),e.jsx("input",{type:"tel",id:"editWhatsappNumber",name:"whatsappNumber",value:s.whatsappNumber,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"editLinkedInUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"LinkedIn URL"}),e.jsx("input",{type:"url",id:"editLinkedInUrl",name:"linkedInUrl",value:s.linkedInUrl,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"https://linkedin.com/in/..."})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editCurrentAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Current Address"}),e.jsx("textarea",{id:"editCurrentAddress",name:"currentAddress",value:s.currentAddress,onChange:g,rows:"3",className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editPermanentAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Permanent Address"}),e.jsx("textarea",{id:"editPermanentAddress",name:"permanentAddress",value:s.permanentAddress,onChange:g,rows:"3",className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editDateOfBirth",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"editDateOfBirth",name:"dateOfBirth",value:s.dateOfBirth,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editJoiningDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Joining Date"}),e.jsx("input",{type:"date",id:"editJoiningDate",name:"joiningDate",value:s.joiningDate,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editSalary",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Salary (₹)"}),e.jsx("input",{type:"number",id:"editSalary",name:"salary",value:s.salary,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Enter salary amount"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editDepartment",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Department"}),e.jsxs("select",{id:"editDepartment",name:"department",value:s.department,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Department"}),T.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editEmployeeRole",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Employee Role"}),e.jsxs("select",{id:"editEmployeeRole",name:"employeeRole",value:s.employeeRole,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Role"}),B.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editStatus",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{id:"editStatus",name:"status",value:s.status,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"TERMINATED",children:"Terminated"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Educational Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editCollegeName",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"College Name"}),e.jsx("input",{type:"text",id:"editCollegeName",name:"collegeName",value:s.collegeName,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Enter college name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editInternshipDuration",className:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-1",children:"Internship Duration (months)"}),e.jsx("input",{type:"number",id:"editInternshipDuration",name:"internshipDuration",value:s.internshipDuration,onChange:g,className:"w-full border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 dark:focus:border-blue-400 focus:border-blue-500",placeholder:"Enter duration in months"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Update Documents (Optional)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(k).map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"file",id:`edit-${r}`,onChange:d=>be(r,d.target.files[0]),accept:".pdf,.jpg,.jpeg,.png",className:"hidden"}),e.jsxs("label",{htmlFor:`edit-${r}`,className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-slate-700 border border-gray-300 dark:border-gray-600 rounded text-sm cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-600 transition",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[r.charAt(0).toUpperCase()+r.slice(1).replace(/([A-Z])/g," $1"),":"]}),e.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200",children:k[r]?k[r].name:"Choose file"})]})]},r))})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-400 rounded-md hover:bg-gray-50 dark:bg-slate-800 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",disabled:j,children:j?"Updating...":"Update User & Employee"})]})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-lg dark:shadow-black/25 max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to delete user ",e.jsx("span",{className:"font-semibold",children:H.fullName}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>P(null),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-400 rounded-md hover:bg-gray-50 dark:bg-slate-800 transition",children:"Cancel"}),e.jsx("button",{onClick:()=>pe(H._id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition",children:"Delete"})]})]})}),Y&&Z&&e.jsx(Me,{employeeId:Z,isOpen:Y,onOpenChange:$,onEmployeeUpdated:ke,departments:T,roles:B}),ce&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 transition-all duration-200 ease-out rounded-lg shadow-lg dark:shadow-black/25 max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Create User Account"}),e.jsxs("p",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Creating account for: ",e.jsx("span",{className:"font-semibold",children:x.fullName})," (",x.email,")"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center mb-3",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:r=>{Q(r.target.checked),r.target.checked&&C("")},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Generate random password"})]}),!A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password *"}),e.jsx("input",{type:"password",value:S,onChange:r=>C(r.target.value),placeholder:"Enter password (min 6 characters)",minLength:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-md dark:bg-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters required"})]}),A&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A random password will be generated and shown after account creation."})]}),I&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md text-sm text-red-700 dark:text-red-400",children:I}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{F(!1),V(null),C(""),c(null)},className:"px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-400 rounded-md hover:bg-gray-50 dark:bg-slate-800 transition",children:"Cancel"}),e.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition",children:"Create Account"})]})]})})]})};export{Pe as default};
